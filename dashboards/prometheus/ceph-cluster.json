{
   "dashboard": {
      "rows": [
         {
            "panels": [
               {
                  "title": ""
               }, 
               {
                  "datasource": "Prometheus", 
                  "targets": [
                     {
                        "tags": [], 
                        "expr": "max(collectd_cephmetrics_gauge{cephmetrics=\"ceph.mon.num_mon\"})", 
                        "format": "time_series", 
                        "refId": "A", 
                        "step": 60, 
                        "resultFormat": "time_series", 
                        "intervalFactor": 2, 
                        "groupBy": [], 
                        "select": [
                           [
                              {
                                 "params": [
                                    "value"
                                 ], 
                                 "type": "field"
                              }
                           ]
                        ]
                     }
                  ], 
                  "title": "MONs"
               }, 
               {
                  "datasource": "Prometheus", 
                  "targets": [
                     {
                        "intervalFactor": 2, 
                        "expr": "max(collectd_cephmetrics_gauge{cephmetrics=\"ceph.mon.num_osd_hosts\"})", 
                        "step": 60, 
                        "refId": "A", 
                        "format": "time_series"
                     }
                  ], 
                  "title": "OSD Hosts"
               }, 
               {
                  "datasource": "Prometheus", 
                  "targets": [
                     {
                        "tags": [], 
                        "expr": "max(collectd_cephmetrics_gauge{cephmetrics=\"ceph.mon.num_mds_up\"})", 
                        "format": "time_series", 
                        "refId": "A", 
                        "step": 60, 
                        "resultFormat": "time_series", 
                        "intervalFactor": 2, 
                        "groupBy": [], 
                        "select": [
                           [
                              {
                                 "params": [
                                    "value"
                                 ], 
                                 "type": "field"
                              }
                           ]
                        ]
                     }
                  ], 
                  "title": "MDS"
               }, 
               {
                  "datasource": "Prometheus", 
                  "targets": [
                     {
                        "intervalFactor": 2, 
                        "expr": "count(collectd_cephmetrics_derive_total{cephmetrics=\"$cluster_name.rgw.put\"})", 
                        "refId": "A", 
                        "format": "time_series"
                     }
                  ], 
                  "title": "RGW Hosts"
               }, 
               {
                  "datasource": "Prometheus", 
                  "targets": [
                     {
                        "intervalFactor": 2, 
                        "expr": "count(max by (name)(label_replace(collectd_cephmetrics_gauge{cephmetrics=~\"$cluster_name.iscsi.gw_name.[^.]*\\..*\"}, \"name\", \"$1\", \"cephmetrics\", \"$cluster_name.iscsi.gw_name.([^.]*)\\..*\")))", 
                        "refId": "A", 
                        "format": "time_series"
                     }
                  ], 
                  "title": "iSCSI Hosts"
               }, 
               {
                  "datasource": "Prometheus", 
                  "targets": [
                     {
                        "tags": [], 
                        "expr": "max(collectd_cephmetrics_gauge{cephmetrics=\"ceph.mon.num_osd\"})", 
                        "format": "time_series", 
                        "refId": "A", 
                        "step": 60, 
                        "resultFormat": "time_series", 
                        "intervalFactor": 2, 
                        "groupBy": [], 
                        "select": [
                           [
                              {
                                 "params": [
                                    "value"
                                 ], 
                                 "type": "field"
                              }
                           ]
                        ]
                     }
                  ], 
                  "title": "OSDs"
               }, 
               {
                  "datasource": "Prometheus", 
                  "targets": [
                     {
                        "tags": [], 
                        "expr": "max(collectd_cephmetrics_gauge{cephmetrics=\"ceph.mon.num_pool\"})", 
                        "format": "time_series", 
                        "refId": "A", 
                        "step": 60, 
                        "resultFormat": "time_series", 
                        "intervalFactor": 2, 
                        "groupBy": [], 
                        "select": [
                           [
                              {
                                 "params": [
                                    "value"
                                 ], 
                                 "type": "field"
                              }
                           ]
                        ]
                     }
                  ], 
                  "title": "Pools"
               }, 
               {
                  "datasource": "Prometheus", 
                  "targets": [
                     {
                        "intervalFactor": 2, 
                        "expr": "max(collectd_cephmetrics_gauge{cephmetrics=\"$cluster_name.mon.osd_bytes_avail\"})", 
                        "step": 60, 
                        "refId": "A", 
                        "format": "time_series"
                     }
                  ], 
                  "title": "Unused Capacity"
               }
            ], 
            "title": "Cluster Configuration"
         }, 
         {
            "panels": [
               {
                  "title": ""
               }, 
               {
                  "title": ""
               }, 
               {
                  "datasource": "Prometheus", 
                  "targets": [
                     {
                        "intervalFactor": 2, 
                        "expr": "max(collectd_cephmetrics_gauge{cephmetrics=\"$cluster_name.mon.features.scrub\"})", 
                        "step": 2, 
                        "refId": "A", 
                        "format": "time_series"
                     }
                  ], 
                  "title": "SCRUB"
               }, 
               {
                  "datasource": "Prometheus", 
                  "targets": [
                     {
                        "intervalFactor": 2, 
                        "expr": "max(collectd_cephmetrics_gauge{cephmetrics=\"$cluster_name.mon.features.deep_scrub\"})", 
                        "step": 2, 
                        "refId": "A", 
                        "format": "time_series"
                     }
                  ], 
                  "title": "DEEP SCRUB"
               }, 
               {
                  "datasource": "Prometheus", 
                  "targets": [
                     {
                        "intervalFactor": 2, 
                        "expr": "max(collectd_cephmetrics_gauge{cephmetrics=\"$cluster_name.mon.features.recovery\"})", 
                        "step": 2, 
                        "refId": "A", 
                        "format": "time_series"
                     }
                  ], 
                  "title": "RECOVERY"
               }, 
               {
                  "datasource": "Prometheus", 
                  "targets": [
                     {
                        "intervalFactor": 2, 
                        "expr": "max(collectd_cephmetrics_gauge{cephmetrics=\"$cluster_name.mon.features.backfill\"})", 
                        "step": 2, 
                        "refId": "A", 
                        "format": "time_series"
                     }
                  ], 
                  "title": "BACKFILL"
               }, 
               {
                  "datasource": "Prometheus", 
                  "targets": [
                     {
                        "intervalFactor": 2, 
                        "expr": "max(collectd_cephmetrics_gauge{cephmetrics=\"$cluster_name.mon.features.rebalance\"})", 
                        "step": 2, 
                        "refId": "A", 
                        "format": "time_series"
                     }
                  ], 
                  "title": "REBALANCE"
               }, 
               {
                  "datasource": "Prometheus", 
                  "targets": [
                     {
                        "intervalFactor": 2, 
                        "expr": "max(collectd_cephmetrics_gauge{cephmetrics=\"$cluster_name.mon.features.out\"})", 
                        "step": 2, 
                        "refId": "A", 
                        "format": "time_series"
                     }
                  ], 
                  "title": "OUT"
               }, 
               {
                  "datasource": "Prometheus", 
                  "targets": [
                     {
                        "intervalFactor": 2, 
                        "expr": "max(collectd_cephmetrics_gauge{cephmetrics=\"$cluster_name.mon.features.down\"})", 
                        "step": 2, 
                        "refId": "A", 
                        "format": "time_series"
                     }
                  ], 
                  "title": "DOWN"
               }
            ], 
            "title": "Cluster Flags"
         }, 
         {
            "panels": [
               {
                  "datasource": "Prometheus", 
                  "targets": [
                     {
                        "tags": [], 
                        "expr": "max(collectd_cephmetrics_gauge{cephmetrics=\"$cluster_name.mon.osd_bytes_used\"})", 
                        "format": "time_series", 
                        "groupBy": [], 
                        "alias": "Used", 
                        "step": 3600, 
                        "resultFormat": "time_series", 
                        "legendFormat": "Used", 
                        "intervalFactor": 2, 
                        "refId": "B", 
                        "select": [
                           [
                              {
                                 "params": [
                                    "value"
                                 ], 
                                 "type": "field"
                              }
                           ]
                        ]
                     }, 
                     {
                        "tags": [], 
                        "expr": "max(collectd_cephmetrics_gauge{cephmetrics=\"$cluster_name.mon.osd_bytes\"})", 
                        "format": "time_series", 
                        "groupBy": [], 
                        "alias": "Raw Capacity", 
                        "step": 3600, 
                        "resultFormat": "time_series", 
                        "legendFormat": "Raw", 
                        "intervalFactor": 2, 
                        "refId": "A", 
                        "select": [
                           [
                              {
                                 "params": [
                                    "value"
                                 ], 
                                 "type": "field"
                              }
                           ]
                        ]
                     }
                  ], 
                  "title": "Cluster Capacity - Past 7 Days"
               }, 
               {
                  "datasource": "Prometheus", 
                  "targets": [
                     {
                        "tags": [], 
                        "expr": "max(label_replace(collectd_cephmetrics_gauge{cephmetrics=~\"$cluster_name.mon.pools..*.percent_used\"}, \"pool\", \"$1\", \"cephmetrics\", \"$cluster_name.mon.pools.(.*).percent_used\")) by (pool)", 
                        "format": "time_series", 
                        "groupBy": [], 
                        "alias": "Used", 
                        "step": 3600, 
                        "resultFormat": "time_series", 
                        "legendFormat": "{{pool}}", 
                        "intervalFactor": 2, 
                        "refId": "A", 
                        "select": [
                           [
                              {
                                 "params": [
                                    "value"
                                 ], 
                                 "type": "field"
                              }
                           ]
                        ]
                     }
                  ], 
                  "title": "Pool Capacity - Past 7 Days"
               }, 
               {
                  "datasource": "Prometheus", 
                  "targets": [
                     {
                        "tags": [], 
                        "expr": "max(collectd_cephmetrics_gauge{cephmetrics=\"$cluster_name.mon.num_object\"})", 
                        "format": "time_series", 
                        "groupBy": [], 
                        "alias": "Used", 
                        "step": 3600, 
                        "resultFormat": "time_series", 
                        "legendFormat": "RADOS Objects", 
                        "intervalFactor": 2, 
                        "refId": "B", 
                        "select": [
                           [
                              {
                                 "params": [
                                    "value"
                                 ], 
                                 "type": "field"
                              }
                           ]
                        ]
                     }
                  ], 
                  "title": "RADOS Object History - Past 7 Days"
               }
            ], 
            "title": "Cluster Capacity"
         }, 
         {
            "panels": [
               {
                  "datasource": "Prometheus", 
                  "targets": [
                     {
                        "format": "time_series", 
                        "expr": "max(collectd_cephmetrics_gauge{cephmetrics=\"$cluster_name.mon.ceph_version\"}) by (instance)", 
                        "step": 2, 
                        "legendFormat": "{{instance}}", 
                        "intervalFactor": 2, 
                        "refId": "A"
                     }
                  ], 
                  "title": "MON Versions"
               }, 
               {
                  "title": ""
               }, 
               {
                  "datasource": "Prometheus", 
                  "targets": [
                     {
                        "format": "time_series", 
                        "expr": "max(collectd_cephmetrics_gauge{cephmetrics=\"$cluster_name.osd.ceph_version\"}) by (instance)", 
                        "step": 2, 
                        "legendFormat": "{{instance}}", 
                        "intervalFactor": 2, 
                        "refId": "A"
                     }
                  ], 
                  "title": "OSD Versions"
               }, 
               {
                  "title": ""
               }, 
               {
                  "datasource": "Prometheus", 
                  "targets": [
                     {
                        "format": "time_series", 
                        "expr": "max(collectd_cephmetrics_gauge{cephmetrics=\"$cluster_name.rgw.ceph_version\"}) by (instance)", 
                        "step": 2, 
                        "legendFormat": "{{instance}}", 
                        "intervalFactor": 2, 
                        "refId": "A"
                     }
                  ], 
                  "title": "RGW Versions"
               }, 
               {
                  "title": ""
               }, 
               {
                  "datasource": "Prometheus", 
                  "targets": [
                     {
                        "format": "time_series", 
                        "expr": "max(collectd_cephmetrics_gauge{cephmetrics=\"$cluster_name.iscsi.ceph_version\"}) by (instance)", 
                        "step": 2, 
                        "legendFormat": "{{instance}}", 
                        "intervalFactor": 2, 
                        "refId": "A"
                     }
                  ], 
                  "title": "iSCSI Versions"
               }
            ], 
            "title": "Ceph Version Configuration"
         }
      ], 
      "templating": {
         "list": [
            {
               "regex": "/cephmetrics=\"([^.]*)\\..*/", 
               "sort": 0, 
               "multi": false, 
               "hide": 2, 
               "name": "cluster_name", 
               "tags": [], 
               "allValue": null, 
               "tagsQuery": "", 
               "current": {
                  "text": "ceph", 
                  "value": "ceph"
               }, 
               "refresh": 1, 
               "label": null, 
               "tagValuesQuery": "", 
               "datasource": "Local", 
               "query": "collectd_cephmetrics_gauge{}", 
               "includeAll": false, 
               "type": "query", 
               "options": [], 
               "useTags": false
            }, 
            {
               "multi": false, 
               "hide": 2, 
               "name": "domain", 
               "allValue": null, 
               "label": null, 
               "current": {
                  "text": "fedex.lan", 
                  "value": "fedex.lan"
               }, 
               "query": "fedex.lan", 
               "type": "custom", 
               "options": [
                  {
                     "text": "fedex.lan", 
                     "selected": true, 
                     "value": "fedex.lan"
                  }
               ], 
               "includeAll": false
            }
         ]
      }
   }
}
