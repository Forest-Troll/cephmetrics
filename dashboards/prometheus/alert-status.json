{
   "dashboard": {
      "rows": [
         {
            "panels": [
               {
                  "title": "Active Ceph Alert List"
               }
            ], 
            "title": "Dashboard Row"
         }, 
         {
            "panels": [
               {
                  "datasource": "Prometheus", 
                  "targets": [
                     {
                        "format": "time_series", 
                        "expr": "max(collectd_cephmetrics_gauge{cephmetrics=~\".*.mon.health\"})", 
                        "step": 20, 
                        "legendFormat": "Ceph Health", 
                        "intervalFactor": 2, 
                        "refId": "A"
                     }
                  ], 
                  "title": "Overall Ceph Health"
               }, 
               {
                  "datasource": "Prometheus", 
                  "targets": [
                     {
                        "hide": false, 
                        "format": "time_series", 
                        "expr": "count(collectd_cephmetrics_gauge{cephmetrics=~\".*.osd..*.osd_percent_used\"} > 85)", 
                        "step": 40, 
                        "legendFormat": "OSDs near full", 
                        "intervalFactor": 2, 
                        "refId": "A"
                     }
                  ], 
                  "title": "Disks Near Full"
               }, 
               {
                  "datasource": "Prometheus", 
                  "targets": [
                     {
                        "hide": false, 
                        "format": "time_series", 
                        "expr": "max(collectd_cephmetrics_gauge{cephmetrics=~\".*.mon.num_osd\"}) - max(collectd_cephmetrics_gauge{cephmetrics=~\".*.mon.num_osd_up\"})", 
                        "step": 4, 
                        "legendFormat": "down", 
                        "intervalFactor": 2, 
                        "refId": "A"
                     }
                  ], 
                  "title": "OSDs Down"
               }, 
               {
                  "datasource": "Prometheus", 
                  "targets": [
                     {
                        "hide": false, 
                        "format": "time_series", 
                        "expr": "max(collectd_cephmetrics_gauge{cephmetrics=~\".*.mon.osd_bytes_used\"})/max(collectd_cephmetrics_gauge{cephmetrics=~\".*.mon.osd_bytes\"})*100", 
                        "step": 40, 
                        "legendFormat": "Raw Capacity Used %", 
                        "intervalFactor": 2, 
                        "refId": "A"
                     }
                  ], 
                  "title": "Cluster Capacity"
               }, 
               {
                  "datasource": "Prometheus", 
                  "targets": [
                     {
                        "format": "time_series", 
                        "expr": "max(collectd_cephmetrics_gauge{cephmetrics=~\".*.mon.num_pgs_stuck\"})", 
                        "step": 240, 
                        "legendFormat": "# pg's stuck inactive", 
                        "intervalFactor": 2, 
                        "refId": "A"
                     }
                  ], 
                  "title": "PG's Stuck"
               }, 
               {
                  "datasource": "Prometheus", 
                  "targets": [
                     {
                        "hide": false, 
                        "format": "time_series", 
                        "expr": "max(max(collectd_cephmetrics_gauge{cephmetrics=~\".*.mon.osd_bytes_avail\"}) by (instance) * 0.9) - max(sum(collectd_cephmetrics_gauge{cephmetrics=~\".*.osd..*.stat_bytes\"}) by (instance))", 
                        "step": 40, 
                        "legendFormat": "name", 
                        "intervalFactor": 2, 
                        "refId": "A"
                     }
                  ], 
                  "title": "OSD Host Loss Check"
               }, 
               {
                  "datasource": "Prometheus", 
                  "targets": [
                     {
                        "format": "time_series", 
                        "expr": "max(label_replace(collectd_cephmetrics_gauge{cephmetrics=~\".*.osd..*.perf.await\"}, \"node\", \"$1\", \"instance\", \"(.*):.*\")) by (node) > 1000", 
                        "step": 40, 
                        "legendFormat": "{{node}}", 
                        "intervalFactor": 2, 
                        "refId": "A"
                     }
                  ], 
                  "title": "Slow OSD responses"
               }, 
               {
                  "datasource": "Prometheus", 
                  "targets": [
                     {
                        "format": "time_series", 
                        "expr": "sum(label_replace(irate(collectd_interface_if_dropped_rx_total{interface!=\"lo\"}[5m]) + irate(collectd_interface_if_dropped_tx_total{interface!=\"lo\"}[5m]) + irate(collectd_interface_if_errors_rx_total{interface!=\"lo\"}[5m]) + irate(collectd_interface_if_errors_tx_total{interface!=\"lo\"}[5m]), \"node\", \"$1\", \"instance\", \"(.*):.*\")) by (node)", 
                        "step": 40, 
                        "legendFormat": "{{node}}", 
                        "intervalFactor": 2, 
                        "refId": "A"
                     }
                  ], 
                  "title": "Network Errors"
               }, 
               {
                  "datasource": "Prometheus", 
                  "targets": [
                     {
                        "format": "time_series", 
                        "expr": "max(label_replace(collectd_cephmetrics_gauge{cephmetrics=~\".*.mon.pools..*.percent_used\"}, \"pool\", \"$1\", \"cephmetrics\", \".*.mon.pools.(.*).percent_used\")) by (pool)", 
                        "step": 40, 
                        "legendFormat": "{{pool}}", 
                        "intervalFactor": 2, 
                        "refId": "A"
                     }
                  ], 
                  "title": "Pool Capacity"
               }
            ], 
            "title": "Health Checks"
         }
      ], 
      "templating": {
         "list": []
      }
   }
}