{
   "meta": {}, 
   "dashboard": {
      "style": "dark", 
      "rows": [
         {
            "repeat": null, 
            "titleSize": "h6", 
            "repeatIteration": null, 
            "title": "Dashboard Row", 
            "height": "250px", 
            "repeatRowId": null, 
            "panels": [
               {
                  "span": 12, 
                  "stateFilter": [
                     "alerting"
                  ], 
                  "links": [], 
                  "show": "current", 
                  "title": "Active Ceph Alert List", 
                  "onlyAlertsOnDashboard": true, 
                  "limit": "20", 
                  "sortOrder": 3, 
                  "type": "alertlist", 
                  "id": 1
               }
            ], 
            "showTitle": false, 
            "collapse": false
         }, 
         {
            "repeat": null, 
            "titleSize": "h5", 
            "repeatIteration": null, 
            "title": "Health Checks", 
            "height": 250, 
            "repeatRowId": null, 
            "panels": [
               {
                  "bars": false, 
                  "timeFrom": null, 
                  "links": [], 
                  "thresholds": [
                     {
                        "colorMode": "critical", 
                        "line": true, 
                        "op": "gt", 
                        "value": 0, 
                        "fill": true
                     }
                  ], 
                  "spaceLength": 10, 
                  "nullPointMode": "null", 
                  "renderer": "flot", 
                  "linewidth": 2, 
                  "steppedLine": true, 
                  "id": 2, 
                  "maxDataPoints": "360", 
                  "fill": 1, 
                  "span": 2, 
                  "title": "Overall Ceph Health", 
                  "tooltip": {
                     "sort": 1, 
                     "shared": false, 
                     "value_type": "individual"
                  }, 
                  "stack": false, 
                  "targets": [
                     {
                        "format": "time_series", 
                        "expr": "max(collectd_cephmetrics_gauge{cephmetrics=~\".*.mon.health\"})", 
                        "step": 20, 
                        "legendFormat": "Ceph Health", 
                        "intervalFactor": 2, 
                        "refId": "A"
                     }
                  ], 
                  "yaxes": [
                     {
                        "logBase": 1, 
                        "show": true, 
                        "max": "10", 
                        "format": "short", 
                        "min": "0", 
                        "label": ""
                     }, 
                     {
                        "logBase": 1, 
                        "show": false, 
                        "max": null, 
                        "format": "short", 
                        "min": null, 
                        "label": null
                     }
                  ], 
                  "xaxis": {
                     "buckets": null, 
                     "show": true, 
                     "values": [], 
                     "mode": "time", 
                     "name": null
                  }, 
                  "seriesOverrides": [], 
                  "percentage": false, 
                  "type": "graph", 
                  "dashes": false, 
                  "description": "The chart plots the clusters health, over time. Health is depicted as a integer; 0, 4 or 8 where 0 is OK, 4 is WARN and 8 represents an ERROR state.", 
                  "hideTimeOverride": false, 
                  "dashLength": 10, 
                  "legend": {
                     "total": false, 
                     "show": true, 
                     "max": false, 
                     "min": false, 
                     "current": false, 
                     "values": false, 
                     "avg": false
                  }, 
                  "timeShift": null, 
                  "aliasColors": {
                     "Ceph Health (0:OK, 4:Warning,8:Error)": "#DEDAF7", 
                     "Ceph Health": "#890F02", 
                     "ceph health": "#890F02"
                  }, 
                  "lines": true, 
                  "points": false, 
                  "datasource": "Local", 
                  "pointradius": 5, 
                  "minSpan": 2
               }, 
               {
                  "bars": false, 
                  "timeFrom": null, 
                  "links": [], 
                  "thresholds": [
                     {
                        "colorMode": "critical", 
                        "line": true, 
                        "op": "gt", 
                        "value": 0, 
                        "fill": true
                     }
                  ], 
                  "spaceLength": 10, 
                  "nullPointMode": "null", 
                  "renderer": "flot", 
                  "linewidth": 1, 
                  "steppedLine": false, 
                  "id": 3, 
                  "fill": 1, 
                  "span": 2, 
                  "title": "Disks Near Full", 
                  "tooltip": {
                     "sort": 0, 
                     "shared": true, 
                     "value_type": "individual"
                  }, 
                  "legend": {
                     "total": false, 
                     "show": false, 
                     "max": false, 
                     "min": false, 
                     "current": false, 
                     "hideEmpty": false, 
                     "values": false, 
                     "avg": false
                  }, 
                  "targets": [
                     {
                        "hide": false, 
                        "format": "time_series", 
                        "expr": "count(collectd_cephmetrics_gauge{cephmetrics=~\".*.osd..*.osd_percent_used\"} > 85)", 
                        "step": 40, 
                        "legendFormat": "OSDs near full", 
                        "intervalFactor": 2, 
                        "refId": "A"
                     }
                  ], 
                  "yaxes": [
                     {
                        "logBase": 1, 
                        "show": true, 
                        "max": null, 
                        "format": "short", 
                        "min": "0", 
                        "label": null
                     }, 
                     {
                        "logBase": 1, 
                        "show": false, 
                        "max": null, 
                        "format": "short", 
                        "min": null, 
                        "label": null
                     }
                  ], 
                  "xaxis": {
                     "buckets": null, 
                     "show": true, 
                     "values": [], 
                     "mode": "time", 
                     "name": null
                  }, 
                  "seriesOverrides": [], 
                  "percentage": false, 
                  "type": "graph", 
                  "dashes": false, 
                  "description": "This shows how many disks are at or above 80% full. Performance may degrade beyond this threshold on filestore (XFS) backed OSD's.", 
                  "dashLength": 10, 
                  "stack": false, 
                  "timeShift": null, 
                  "aliasColors": {}, 
                  "lines": true, 
                  "points": false, 
                  "datasource": "Local", 
                  "pointradius": 5, 
                  "minSpan": 2
               }, 
               {
                  "bars": true, 
                  "timeFrom": "5m", 
                  "links": [], 
                  "thresholds": [
                     {
                        "colorMode": "critical", 
                        "line": true, 
                        "op": "gt", 
                        "value": 0, 
                        "fill": true
                     }
                  ], 
                  "spaceLength": 10, 
                  "nullPointMode": "null", 
                  "renderer": "flot", 
                  "linewidth": 2, 
                  "steppedLine": true, 
                  "id": 4, 
                  "fill": 2, 
                  "span": 2, 
                  "title": "OSDs Down", 
                  "tooltip": {
                     "sort": 0, 
                     "shared": true, 
                     "value_type": "individual"
                  }, 
                  "stack": false, 
                  "targets": [
                     {
                        "hide": false, 
                        "format": "time_series", 
                        "expr": "max(collectd_cephmetrics_gauge{cephmetrics=~\".*.mon.num_osd\"}) - max(collectd_cephmetrics_gauge{cephmetrics=~\".*.mon.num_osd_up\"})", 
                        "step": 4, 
                        "legendFormat": "down", 
                        "intervalFactor": 2, 
                        "refId": "A"
                     }
                  ], 
                  "yaxes": [
                     {
                        "logBase": 1, 
                        "show": true, 
                        "max": null, 
                        "format": "short", 
                        "min": "0", 
                        "label": null
                     }, 
                     {
                        "logBase": 1, 
                        "show": false, 
                        "max": null, 
                        "format": "short", 
                        "min": null, 
                        "label": null
                     }
                  ], 
                  "xaxis": {
                     "buckets": null, 
                     "show": true, 
                     "values": [], 
                     "mode": "time", 
                     "name": null
                  }, 
                  "seriesOverrides": [], 
                  "percentage": false, 
                  "type": "graph", 
                  "dashes": false, 
                  "description": "Count of OSDs currently in a DOWN state", 
                  "hideTimeOverride": true, 
                  "dashLength": 10, 
                  "legend": {
                     "rightSide": false, 
                     "total": false, 
                     "min": false, 
                     "max": false, 
                     "show": false, 
                     "current": false, 
                     "values": false, 
                     "alignAsTable": false, 
                     "avg": false, 
                     "hideZero": false
                  }, 
                  "timeShift": null, 
                  "aliasColors": {}, 
                  "lines": false, 
                  "points": false, 
                  "datasource": "Local", 
                  "pointradius": 5, 
                  "minSpan": 2
               }, 
               {
                  "bars": false, 
                  "timeFrom": null, 
                  "links": [], 
                  "thresholds": [
                     {
                        "colorMode": "critical", 
                        "line": true, 
                        "op": "gt", 
                        "value": 85, 
                        "fill": true
                     }
                  ], 
                  "spaceLength": 10, 
                  "nullPointMode": "null", 
                  "renderer": "flot", 
                  "linewidth": 1, 
                  "steppedLine": false, 
                  "id": 5, 
                  "fill": 1, 
                  "span": 2, 
                  "title": "Cluster Capacity", 
                  "tooltip": {
                     "sort": 0, 
                     "shared": true, 
                     "value_type": "individual"
                  }, 
                  "legend": {
                     "total": false, 
                     "show": true, 
                     "max": false, 
                     "min": false, 
                     "current": false, 
                     "values": false, 
                     "avg": false
                  }, 
                  "targets": [
                     {
                        "hide": false, 
                        "format": "time_series", 
                        "expr": "max(collectd_cephmetrics_gauge{cephmetrics=~\".*.mon.osd_bytes_used\"})/max(collectd_cephmetrics_gauge{cephmetrics=~\".*.mon.osd_bytes\"})*100", 
                        "step": 40, 
                        "legendFormat": "Raw Capacity Used %", 
                        "intervalFactor": 2, 
                        "refId": "A"
                     }
                  ], 
                  "yaxes": [
                     {
                        "logBase": 1, 
                        "show": true, 
                        "max": "100", 
                        "format": "percent", 
                        "min": "0", 
                        "label": ""
                     }, 
                     {
                        "logBase": 1, 
                        "show": false, 
                        "max": null, 
                        "format": "short", 
                        "min": null, 
                        "label": null
                     }
                  ], 
                  "xaxis": {
                     "buckets": null, 
                     "show": true, 
                     "values": [], 
                     "mode": "time", 
                     "name": null
                  }, 
                  "seriesOverrides": [], 
                  "percentage": false, 
                  "type": "graph", 
                  "dashes": false, 
                  "description": "This trigger raises a notification if the raw used crosses the 85% capacity threshold of the ceph cluster", 
                  "dashLength": 10, 
                  "stack": false, 
                  "timeShift": null, 
                  "aliasColors": {}, 
                  "lines": true, 
                  "points": false, 
                  "datasource": "Local", 
                  "pointradius": 5, 
                  "minSpan": 2
               }, 
               {
                  "bars": false, 
                  "timeFrom": "6h", 
                  "links": [], 
                  "thresholds": [
                     {
                        "colorMode": "critical", 
                        "line": true, 
                        "op": "gt", 
                        "value": 0, 
                        "fill": true
                     }
                  ], 
                  "spaceLength": 10, 
                  "nullPointMode": "null", 
                  "renderer": "flot", 
                  "linewidth": 2, 
                  "steppedLine": false, 
                  "id": 8, 
                  "fill": 2, 
                  "span": 2, 
                  "title": "PG's Stuck", 
                  "tooltip": {
                     "sort": 0, 
                     "shared": false, 
                     "value_type": "individual"
                  }, 
                  "stack": false, 
                  "targets": [
                     {
                        "format": "time_series", 
                        "expr": "max(collectd_cephmetrics_gauge{cephmetrics=~\".*.mon.num_pgs_stuck\"})", 
                        "step": 240, 
                        "legendFormat": "# pg's stuck inactive", 
                        "intervalFactor": 2, 
                        "refId": "A"
                     }
                  ], 
                  "yaxes": [
                     {
                        "logBase": 1, 
                        "show": true, 
                        "max": null, 
                        "format": "short", 
                        "min": "0", 
                        "label": null
                     }, 
                     {
                        "logBase": 1, 
                        "show": false, 
                        "max": null, 
                        "format": "short", 
                        "min": null, 
                        "label": null
                     }
                  ], 
                  "xaxis": {
                     "buckets": null, 
                     "show": true, 
                     "values": [
                        "total"
                     ], 
                     "mode": "time", 
                     "name": null
                  }, 
                  "seriesOverrides": [], 
                  "percentage": false, 
                  "type": "graph", 
                  "dashes": false, 
                  "description": "This chart shows whether there are pg's in a stuck state, that need manual intervention to resolve.", 
                  "hideTimeOverride": true, 
                  "dashLength": 10, 
                  "legend": {
                     "total": false, 
                     "show": true, 
                     "max": false, 
                     "min": false, 
                     "current": false, 
                     "values": false, 
                     "avg": false
                  }, 
                  "timeShift": null, 
                  "aliasColors": {}, 
                  "lines": true, 
                  "points": false, 
                  "datasource": "Local", 
                  "pointradius": 5, 
                  "minSpan": 2
               }, 
               {
                  "bars": false, 
                  "timeFrom": null, 
                  "links": [], 
                  "thresholds": [
                     {
                        "colorMode": "critical", 
                        "line": true, 
                        "op": "lt", 
                        "value": 0, 
                        "fill": true
                     }
                  ], 
                  "spaceLength": 10, 
                  "nullPointMode": "null", 
                  "renderer": "flot", 
                  "linewidth": 1, 
                  "steppedLine": false, 
                  "id": 9, 
                  "fill": 1, 
                  "span": 2, 
                  "title": "OSD Host Loss Check", 
                  "tooltip": {
                     "sort": 0, 
                     "shared": true, 
                     "value_type": "individual"
                  }, 
                  "legend": {
                     "total": false, 
                     "show": false, 
                     "max": false, 
                     "min": false, 
                     "current": false, 
                     "values": false, 
                     "avg": false
                  }, 
                  "targets": [
                     {
                        "hide": false, 
                        "format": "time_series", 
                        "expr": "max(max(collectd_cephmetrics_gauge{cephmetrics=~\".*.mon.osd_bytes_avail\"}) by (instance) * 0.9) - max(sum(collectd_cephmetrics_gauge{cephmetrics=~\".*.osd..*.stat_bytes\"}) by (instance))", 
                        "step": 40, 
                        "legendFormat": "name", 
                        "intervalFactor": 2, 
                        "refId": "A"
                     }
                  ], 
                  "yaxes": [
                     {
                        "logBase": 1, 
                        "show": true, 
                        "max": null, 
                        "format": "decbytes", 
                        "min": "0", 
                        "label": null
                     }, 
                     {
                        "logBase": 1, 
                        "show": true, 
                        "max": null, 
                        "format": "short", 
                        "min": null, 
                        "label": null
                     }
                  ], 
                  "xaxis": {
                     "buckets": null, 
                     "show": true, 
                     "values": [], 
                     "mode": "time", 
                     "name": null
                  }, 
                  "seriesOverrides": [], 
                  "percentage": false, 
                  "type": "graph", 
                  "dashes": false, 
                  "description": "This graph checks the cluster @ 90% full is enough to support the loss of the largest OSD host", 
                  "dashLength": 10, 
                  "stack": false, 
                  "timeShift": null, 
                  "aliasColors": {
                     "Largest OSD Host": "#890F02"
                  }, 
                  "lines": true, 
                  "points": false, 
                  "datasource": "Local", 
                  "pointradius": 5, 
                  "minSpan": 2
               }, 
               {
                  "bars": false, 
                  "timeFrom": "1h", 
                  "links": [], 
                  "thresholds": [
                     {
                        "colorMode": "critical", 
                        "line": true, 
                        "op": "gt", 
                        "value": 1000, 
                        "fill": true
                     }
                  ], 
                  "spaceLength": 10, 
                  "nullPointMode": "null", 
                  "renderer": "flot", 
                  "linewidth": 1, 
                  "steppedLine": false, 
                  "id": 10, 
                  "maxDataPoints": "", 
                  "fill": 1, 
                  "span": 2, 
                  "title": "Slow OSD responses", 
                  "tooltip": {
                     "sort": 0, 
                     "shared": true, 
                     "value_type": "individual"
                  }, 
                  "stack": false, 
                  "targets": [
                     {
                        "format": "time_series", 
                        "expr": "max(label_replace(collectd_cephmetrics_gauge{cephmetrics=~\".*.osd..*.perf.await\"}, \"node\", \"$1\", \"instance\", \"(.*):.*\")) by (node) > 1000", 
                        "step": 40, 
                        "legendFormat": "{{node}}", 
                        "intervalFactor": 2, 
                        "refId": "A"
                     }
                  ], 
                  "yaxes": [
                     {
                        "logBase": 1, 
                        "show": true, 
                        "max": null, 
                        "format": "none", 
                        "min": "0", 
                        "label": "ms"
                     }, 
                     {
                        "logBase": 1, 
                        "show": false, 
                        "max": null, 
                        "format": "short", 
                        "min": null, 
                        "label": null
                     }
                  ], 
                  "xaxis": {
                     "buckets": null, 
                     "show": true, 
                     "values": [], 
                     "mode": "time", 
                     "name": null
                  }, 
                  "seriesOverrides": [], 
                  "percentage": false, 
                  "type": "graph", 
                  "dashes": false, 
                  "description": "Graph checking for OSD Latencies that are above 1s.", 
                  "hideTimeOverride": true, 
                  "dashLength": 10, 
                  "legend": {
                     "total": false, 
                     "show": true, 
                     "max": false, 
                     "min": false, 
                     "current": false, 
                     "values": false, 
                     "avg": false
                  }, 
                  "timeShift": null, 
                  "aliasColors": {
                     "Largest OSD Host": "#890F02"
                  }, 
                  "lines": true, 
                  "points": false, 
                  "datasource": "Local", 
                  "pointradius": 5, 
                  "minSpan": 2
               }, 
               {
                  "bars": false, 
                  "timeFrom": null, 
                  "links": [], 
                  "thresholds": [
                     {
                        "colorMode": "critical", 
                        "line": true, 
                        "op": "gt", 
                        "value": 10, 
                        "fill": true
                     }
                  ], 
                  "spaceLength": 10, 
                  "nullPointMode": "null", 
                  "renderer": "flot", 
                  "linewidth": 1, 
                  "steppedLine": false, 
                  "id": 11, 
                  "fill": 1, 
                  "span": 2, 
                  "title": "Network Errors", 
                  "tooltip": {
                     "sort": 0, 
                     "shared": true, 
                     "value_type": "individual"
                  }, 
                  "legend": {
                     "total": false, 
                     "show": false, 
                     "max": false, 
                     "min": false, 
                     "current": false, 
                     "values": false, 
                     "avg": false
                  }, 
                  "targets": [
                     {
                        "format": "time_series", 
                        "expr": "sum(label_replace(irate(collectd_interface_if_dropped_rx_total{interface!=\"lo\"}[5m]) + irate(collectd_interface_if_dropped_tx_total{interface!=\"lo\"}[5m]) + irate(collectd_interface_if_errors_rx_total{interface!=\"lo\"}[5m]) + irate(collectd_interface_if_errors_tx_total{interface!=\"lo\"}[5m]), \"node\", \"$1\", \"instance\", \"(.*):.*\")) by (node)", 
                        "step": 40, 
                        "legendFormat": "{{node}}", 
                        "intervalFactor": 2, 
                        "refId": "A"
                     }
                  ], 
                  "yaxes": [
                     {
                        "logBase": 1, 
                        "show": true, 
                        "max": null, 
                        "format": "none", 
                        "min": "0", 
                        "label": null
                     }, 
                     {
                        "logBase": 1, 
                        "show": false, 
                        "max": null, 
                        "format": "short", 
                        "min": null, 
                        "label": null
                     }
                  ], 
                  "xaxis": {
                     "buckets": null, 
                     "show": true, 
                     "values": [], 
                     "mode": "time", 
                     "name": null
                  }, 
                  "seriesOverrides": [], 
                  "percentage": false, 
                  "type": "graph", 
                  "dashes": false, 
                  "description": "Checks all interfaces for dropped/error packets, and alerts if more than 10 are seen in a 5m interval", 
                  "dashLength": 10, 
                  "stack": false, 
                  "timeShift": null, 
                  "aliasColors": {}, 
                  "lines": true, 
                  "points": false, 
                  "datasource": "Local", 
                  "pointradius": 5, 
                  "minSpan": 2
               }, 
               {
                  "bars": false, 
                  "timeFrom": null, 
                  "links": [], 
                  "thresholds": [
                     {
                        "colorMode": "critical", 
                        "line": true, 
                        "op": "gt", 
                        "value": 85, 
                        "fill": true
                     }
                  ], 
                  "spaceLength": 10, 
                  "nullPointMode": "null", 
                  "renderer": "flot", 
                  "linewidth": 2, 
                  "steppedLine": false, 
                  "id": 12, 
                  "fill": 5, 
                  "span": 2, 
                  "title": "Pool Capacity", 
                  "tooltip": {
                     "sort": 0, 
                     "shared": true, 
                     "value_type": "individual"
                  }, 
                  "legend": {
                     "total": false, 
                     "show": true, 
                     "max": false, 
                     "min": false, 
                     "current": false, 
                     "values": false, 
                     "avg": false
                  }, 
                  "targets": [
                     {
                        "format": "time_series", 
                        "expr": "max(label_replace(collectd_cephmetrics_gauge{cephmetrics=~\".*.mon.pools..*.percent_used\"}, \"pool\", \"$1\", \"cephmetrics\", \".*.mon.pools.(.*).percent_used\")) by (pool)", 
                        "step": 40, 
                        "legendFormat": "{{pool}}", 
                        "intervalFactor": 2, 
                        "refId": "A"
                     }
                  ], 
                  "yaxes": [
                     {
                        "logBase": 1, 
                        "show": true, 
                        "max": null, 
                        "format": "percent", 
                        "min": null, 
                        "label": null
                     }, 
                     {
                        "logBase": 1, 
                        "show": true, 
                        "max": null, 
                        "format": "short", 
                        "min": null, 
                        "label": null
                     }
                  ], 
                  "xaxis": {
                     "buckets": null, 
                     "show": true, 
                     "values": [], 
                     "mode": "time", 
                     "name": null
                  }, 
                  "seriesOverrides": [], 
                  "percentage": false, 
                  "type": "graph", 
                  "dashes": false, 
                  "repeat": null, 
                  "dashLength": 10, 
                  "stack": false, 
                  "timeShift": null, 
                  "aliasColors": {}, 
                  "lines": true, 
                  "points": false, 
                  "datasource": "Local", 
                  "pointradius": 5, 
                  "minSpan": 2
               }
            ], 
            "showTitle": true, 
            "collapse": false
         }
      ], 
      "templating": {
         "list": []
      }, 
      "links": [], 
      "tags": [], 
      "graphTooltip": 0, 
      "hideControls": false, 
      "title": "Alert Status", 
      "editable": true, 
      "refresh": "10s", 
      "annotations": {
         "list": []
      }, 
      "gnetId": null, 
      "timepicker": {
         "time_options": [
            "5m", 
            "15m", 
            "1h", 
            "6h", 
            "12h", 
            "24h", 
            "2d", 
            "7d", 
            "30d"
         ], 
         "refresh_intervals": [
            "5s", 
            "10s", 
            "30s", 
            "1m", 
            "5m", 
            "15m", 
            "30m", 
            "1h", 
            "2h", 
            "1d"
         ]
      }, 
      "version": 2, 
      "time": {
         "to": "now", 
         "from": "now-1h"
      }, 
      "timezone": "browser", 
      "schemaVersion": 14, 
      "id": 31
   }
}