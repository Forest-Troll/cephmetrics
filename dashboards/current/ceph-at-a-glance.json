{"meta":{"isStarred":true,"type":"db","canSave":true,"canEdit":true,"canStar":true,"slug":"ceph-at-a-glance","expires":"0001-01-01T00:00:00Z","created":"2017-06-21T03:22:49Z","updated":"2017-06-26T05:20:09Z","updatedBy":"admin@localhost","createdBy":"admin@localhost","version":110},"dashboard":{"annotations":{"list":[]},"editable":false,"gnetId":null,"graphTooltip":0,"hideControls":true,"id":16,"links":[{"asDropdown":true,"icon":"external link","includeVars":true,"keepTime":true,"tags":["overview"],"targetBlank":true,"title":"Shortcuts","type":"dashboards"}],"refresh":"10s","rows":[{"collapse":false,"height":"60px","panels":[{"cacheTimeout":null,"colorBackground":false,"colorValue":true,"colors":["rgba(255, 255, 255, 0.9)","rgba(237, 129, 40, 0.89)","rgba(50, 172, 45, 0.97)"],"datasource":null,"format":"none","gauge":{"maxValue":100,"minValue":0,"show":false,"thresholdLabels":false,"thresholdMarkers":true},"height":"50px","id":66,"interval":null,"links":[{"dashUri":"db/ceph-frontend","dashboard":"Ceph - Frontend","includeVars":true,"keepTime":true,"targetBlank":true,"title":"Ceph - Frontend","type":"dashboard"}],"mappingType":1,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":100,"minSpan":1,"nullPointMode":"connected","nullText":null,"postfix":"","postfixFontSize":"50%","prefix":"","prefixFontSize":"50%","rangeMaps":[{"from":"null","text":"N/A","to":"null"}],"span":1,"sparkline":{"fillColor":"rgba(31, 118, 189, 0.18)","full":false,"lineColor":"rgb(31, 120, 193)","show":false},"tableColumn":"","targets":[{"hide":true,"refId":"A","target":""}],"thresholds":"1","title":"Pools","transparent":true,"type":"singlestat","valueFontSize":"40%","valueMaps":[{"op":"=","text":"","value":"null"}],"valueName":"current"},{"cacheTimeout":null,"colorBackground":false,"colorValue":true,"colors":["rgba(254, 254, 254, 0.9)","rgba(237, 129, 40, 0.89)","rgba(50, 172, 45, 0.97)"],"datasource":null,"format":"none","gauge":{"maxValue":100,"minValue":0,"show":false,"thresholdLabels":false,"thresholdMarkers":true},"height":"50px","id":67,"interval":null,"links":[{"dashUri":"db/ceph-backend-storage","dashboard":"Ceph Backend Storage","includeVars":true,"keepTime":true,"targetBlank":true,"title":"Ceph Backend Storage","type":"dashboard"}],"mappingType":1,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":100,"minSpan":1,"nullPointMode":"connected","nullText":null,"postfix":"","postfixFontSize":"50%","prefix":"","prefixFontSize":"50%","rangeMaps":[{"from":"null","text":"N/A","to":"null"}],"span":1,"sparkline":{"fillColor":"rgba(31, 118, 189, 0.18)","full":false,"lineColor":"rgb(31, 120, 193)","show":false},"tableColumn":"","targets":[{"hide":true,"refId":"A","target":""}],"thresholds":"1","title":"OSD Hosts","transparent":true,"type":"singlestat","valueFontSize":"40%","valueMaps":[{"op":"=","text":"","value":"null"}],"valueName":"current"},{"cacheTimeout":null,"colorBackground":false,"colorValue":true,"colors":["rgba(255, 255, 255, 0.97)","rgba(237, 129, 40, 0.89)","rgba(245, 122, 54, 0.9)"],"datasource":null,"format":"none","gauge":{"maxValue":100,"minValue":0,"show":false,"thresholdLabels":false,"thresholdMarkers":true},"height":"50px","id":68,"interval":null,"links":[{"dashUri":"db/ceph-rgw-workload","dashboard":"Ceph - RGW Workload","includeVars":true,"keepTime":true,"targetBlank":true,"title":"Ceph - RGW Workload","type":"dashboard"}],"mappingType":1,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":100,"minSpan":1,"nullPointMode":"connected","nullText":null,"postfix":"","postfixFontSize":"50%","prefix":"","prefixFontSize":"50%","rangeMaps":[{"from":"null","text":"N/A","to":"null"}],"span":1,"sparkline":{"fillColor":"rgba(31, 118, 189, 0.18)","full":false,"lineColor":"rgb(31, 120, 193)","show":false},"tableColumn":"","targets":[{"hide":true,"refId":"A","target":""}],"thresholds":"1","title":"S3/Swift","transparent":true,"type":"singlestat","valueFontSize":"40%","valueMaps":[{"op":"=","text":"","value":"null"}],"valueName":"current"},{"cacheTimeout":null,"colorBackground":false,"colorValue":true,"colors":["rgba(251, 251, 252, 0.9)","rgba(237, 129, 40, 0.89)","rgba(50, 172, 45, 0.97)"],"datasource":null,"format":"none","gauge":{"maxValue":100,"minValue":0,"show":false,"thresholdLabels":false,"thresholdMarkers":true},"height":"50px","id":69,"interval":null,"links":[{"dashUri":"db/network-usage-by-node","dashboard":"Network Usage by Node","includeVars":true,"keepTime":true,"targetBlank":true,"title":"Network Usage by Node","type":"dashboard"}],"mappingType":1,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":100,"minSpan":1,"nullPointMode":"connected","nullText":null,"postfix":"","postfixFontSize":"50%","prefix":"","prefixFontSize":"50%","rangeMaps":[{"from":"null","text":"N/A","to":"null"}],"span":1,"sparkline":{"fillColor":"rgba(31, 118, 189, 0.18)","full":false,"lineColor":"rgb(31, 120, 193)","show":false},"tableColumn":"","targets":[{"hide":true,"refId":"A","target":""}],"thresholds":"1","title":"Network","transparent":true,"type":"singlestat","valueFontSize":"40%","valueMaps":[{"op":"=","text":"","value":"null"}],"valueName":"current"},{"cacheTimeout":null,"colorBackground":false,"colorValue":true,"colors":["rgba(255, 255, 255, 0.9)","rgba(237, 129, 40, 0.89)","rgba(50, 172, 45, 0.97)"],"datasource":null,"format":"none","gauge":{"maxValue":100,"minValue":0,"show":false,"thresholdLabels":false,"thresholdMarkers":true},"height":"50px","id":70,"interval":null,"links":[{"dashUri":"db/ceph-rados","dashboard":"Ceph - RADOS","includeVars":true,"keepTime":true,"targetBlank":true,"title":"Ceph - RADOS","type":"dashboard"}],"mappingType":1,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":100,"minSpan":1,"nullPointMode":"connected","nullText":null,"postfix":"","postfixFontSize":"50%","prefix":"","prefixFontSize":"50%","rangeMaps":[{"from":"null","text":"N/A","to":"null"}],"span":1,"sparkline":{"fillColor":"rgba(31, 118, 189, 0.18)","full":false,"lineColor":"rgb(31, 120, 193)","show":false},"tableColumn":"","targets":[{"hide":true,"refId":"A","target":""}],"thresholds":"1","title":"RADOS","transparent":true,"type":"singlestat","valueFontSize":"40%","valueMaps":[{"op":"=","text":"","value":"null"}],"valueName":"current"}],"repeat":null,"repeatIteration":null,"repeatRowId":null,"showTitle":false,"title":"Dashboard Row","titleSize":"h6"},{"collapse":false,"height":"200","panels":[{"cacheTimeout":null,"colorBackground":true,"colorValue":false,"colors":["rgba(0,128,0, 0.97)","rgba(255,165,0, 1)","rgba(245, 54, 54, 0.9)"],"datasource":"Local","description":"","format":"none","gauge":{"maxValue":100,"minValue":0,"show":false,"thresholdLabels":false,"thresholdMarkers":true},"id":28,"interval":null,"links":[{"dashUri":"db/ceph-rados","dashboard":"Ceph - RADOS","includeVars":true,"keepTime":true,"targetBlank":true,"title":"Ceph - RADOS","type":"dashboard"}],"mappingType":2,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":100,"minSpan":1,"nullPointMode":"connected","nullText":null,"postfix":"","postfixFontSize":"50%","prefix":"","prefixFontSize":"50%","rangeMaps":[{"from":"0","text":"OK","to":"0"},{"from":"1","text":"WARN","to":"4"},{"from":"5","text":"ERROR","to":"99"}],"span":1,"sparkline":{"fillColor":"rgba(31, 118, 189, 0.18)","full":false,"lineColor":"rgb(31, 120, 193)","show":false},"tableColumn":"","targets":[{"refId":"A","target":"maxSeries(collectd.*.$domain.cephmetrics.gauge.$cluster_name.mon.health)","textEditor":true}],"thresholds":"1","title":"Health","type":"singlestat","valueFontSize":"50%","valueMaps":[{"op":"=","text":"OK","value":"0"},{"op":"=","text":"WARN","value":"4"},{"op":"=","text":"ERROR","value":"8"}],"valueName":"current"},{"clusterName":"Mons","displayName":"Mons","flipCard":false,"flipTime":5,"id":75,"isGrayOnNoData":true,"links":[],"minSpan":1,"namePrefix":"","span":1,"targets":[{"aggregation":"Last","alias":"total","display":true,"displayType":"Regular","refId":"A","target":"alias(maxSeries(keepLastValue(collectd.$mon_servers.$domain.cephmetrics.gauge.$cluster_name.mon.num_mon,6)), 'total')","textEditor":true,"valueHandler":"Threshold","warn":"1"},{"aggregation":"Last","alias":"quorum","display":true,"displayType":"Regular","refId":"B","target":"alias(maxSeries(keepLastValue(collectd.$mon_servers.$domain.cephmetrics.gauge.$cluster_name.mon.num_mon_quorum,6)), 'quorum')","textEditor":true,"valueHandler":"Text Only","warn":"1"},{"aggregation":"Last","alias":"down","crit":"3","display":true,"displayType":"Regular","refId":"C","target":"alias(diffSeries(#A,#B), \"down\")","targetFull":"alias(diffSeries(alias(maxSeries(keepLastValue(collectd.$mon_servers.$domain.cephmetrics.gauge.$cluster_name.mon.num_mon,6)), 'total'),alias(maxSeries(keepLastValue(collectd.$mon_servers.$domain.cephmetrics.gauge.$cluster_name.mon.num_mon_quorum,6)), 'quorum')), \"down\")","textEditor":true,"valueHandler":"Threshold","warn":"1"}],"title":"","type":"vonage-status-panel"},{"clusterName":"OSDs","displayName":"OSDs","flipCard":false,"flipTime":5,"id":65,"links":[],"minSpan":1,"namePrefix":"","span":1,"targets":[{"aggregation":"Last","alias":"Total","display":false,"displayType":"Regular","hide":true,"refId":"A","target":"alias(maxSeries(collectd.*.$domain.cephmetrics.gauge.$cluster_name.mon.num_osd), 'Total')","textEditor":true,"valueHandler":"Threshold"},{"aggregation":"Last","alias":"in","display":false,"displayType":"Regular","refId":"B","target":"alias(maxSeries(keepLastValue(collectd.*.$domain.cephmetrics.gauge.$cluster_name.mon.num_osd_in,6)), \"in\")","textEditor":true,"valueHandler":"Text Only"},{"aggregation":"Last","alias":"up","display":false,"displayType":"Regular","refId":"C","target":"alias(maxSeries(keepLastValue(collectd.*.$domain.cephmetrics.gauge.$cluster_name.mon.num_osd_up,6)), \"up\")","textEditor":true,"valueHandler":"Text Only"},{"aggregation":"Last","alias":"down","crit":"3","display":true,"displayType":"Regular","hide":false,"refId":"D","target":"alias(diffSeries(#B,#C), \"down\")","targetFull":"alias(diffSeries(alias(maxSeries(keepLastValue(collectd.*.$domain.cephmetrics.gauge.$cluster_name.mon.num_osd_in,6)), \"in\"),alias(maxSeries(keepLastValue(collectd.*.$domain.cephmetrics.gauge.$cluster_name.mon.num_osd_up,6)), \"up\")), \"down\")","textEditor":true,"url":"dashboard/db/ceph-backend-storage","valueHandler":"Threshold","warn":"1"}],"title":"","type":"vonage-status-panel"},{"cacheTimeout":null,"colorBackground":false,"colorValue":false,"colors":["rgba(245, 54, 54, 0.9)","rgba(237, 129, 40, 0.89)","rgba(50, 172, 45, 0.97)"],"datasource":null,"decimals":0,"format":"short","gauge":{"maxValue":100,"minValue":0,"show":false,"thresholdLabels":false,"thresholdMarkers":true},"id":35,"interval":null,"links":[],"mappingType":1,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":100,"minSpan":1,"nullPointMode":"connected","nullText":null,"postfix":"","postfixFontSize":"50%","prefix":"","prefixFontSize":"50%","rangeMaps":[{"from":"null","text":"N/A","to":"null"}],"span":1,"sparkline":{"fillColor":"rgba(31, 118, 189, 0.18)","full":false,"lineColor":"rgb(31, 120, 193)","show":false},"tableColumn":"","targets":[{"refId":"A","target":"maxSeries(collectd.*.$domain.cephmetrics.gauge.$cluster_name.mon.num_osd_hosts)","textEditor":true}],"thresholds":"","title":"OSD Hosts","type":"singlestat","valueFontSize":"80%","valueMaps":[{"op":"=","text":"N/A","value":"null"}],"valueName":"current"},{"cacheTimeout":null,"colorBackground":false,"colorValue":false,"colors":["rgba(245, 54, 54, 0.9)","rgba(237, 129, 40, 0.89)","rgba(50, 172, 45, 0.97)"],"datasource":null,"format":"none","gauge":{"maxValue":100,"minValue":0,"show":false,"thresholdLabels":false,"thresholdMarkers":true},"id":33,"interval":null,"links":[],"mappingType":1,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":100,"minSpan":1,"nullPointMode":"connected","nullText":null,"postfix":"","postfixFontSize":"50%","prefix":"","prefixFontSize":"50%","rangeMaps":[{"from":"null","text":"N/A","to":"null"}],"span":1,"sparkline":{"fillColor":"rgba(31, 118, 189, 0.18)","full":false,"lineColor":"rgb(31, 120, 193)","show":false},"tableColumn":"","targets":[{"refId":"A","target":"sumSeries(offset(scale(collectd.*.$domain.cephmetrics.derive.$cluster_name.rgw.put,0),1))","textEditor":true}],"thresholds":"","title":"RGW Hosts","type":"singlestat","valueFontSize":"80%","valueMaps":[{"op":"=","text":"N/A","value":"null"}],"valueName":"current"},{"cacheTimeout":null,"colorBackground":false,"colorValue":false,"colors":["rgba(245, 54, 54, 0.9)","rgba(237, 129, 40, 0.89)","rgba(50, 172, 45, 0.97)"],"datasource":null,"format":"none","gauge":{"maxValue":100,"minValue":0,"show":false,"thresholdLabels":false,"thresholdMarkers":true},"id":34,"interval":null,"links":[],"mappingType":1,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":100,"minSpan":1,"nullPointMode":"connected","nullText":null,"postfix":"","postfixFontSize":"50%","prefix":"","prefixFontSize":"50%","rangeMaps":[{"from":"null","text":"N/A","to":"null"}],"span":1,"sparkline":{"fillColor":"rgba(31, 118, 189, 0.18)","full":false,"lineColor":"rgb(31, 120, 193)","show":false},"tableColumn":"","targets":[{"refId":"A","target":"maxSeries(collectd.*.$domain.cephmetrics.gauge.$cluster_name.mon.num_mds_in)","textEditor":true}],"thresholds":"","title":"MDS","type":"singlestat","valueFontSize":"80%","valueMaps":[{"op":"=","text":"N/A","value":"null"}],"valueName":"avg"},{"cacheTimeout":null,"colorBackground":false,"colorValue":false,"colors":["rgba(50, 172, 45, 0.97)","rgba(237, 129, 40, 0.89)","rgba(245, 54, 54, 0.9)"],"datasource":null,"decimals":0,"format":"short","gauge":{"maxValue":100,"minValue":0,"show":true,"thresholdLabels":false,"thresholdMarkers":true},"id":38,"interval":null,"links":[],"mappingType":1,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":100,"minSpan":2,"nullPointMode":"connected","nullText":null,"postfix":"%","postfixFontSize":"40%","prefix":"","prefixFontSize":"50%","rangeMaps":[{"from":"null","text":"N/A","to":"null"}],"span":2,"sparkline":{"fillColor":"rgba(31, 118, 189, 0.18)","full":false,"lineColor":"rgb(31, 120, 193)","show":false},"tableColumn":"","targets":[{"hide":true,"refId":"A","target":"maxSeries(collectd.*.$domain.cephmetrics.gauge.$cluster_name.mon.osd_bytes_avail)","textEditor":true},{"hide":true,"refId":"C","target":"maxSeries(collectd.*.$domain.cephmetrics.gauge.$cluster_name.mon.osd_bytes)","textEditor":true},{"refId":"B","target":"divideSeries(#C,#A)","targetFull":"divideSeries(maxSeries(collectd.*.$domain.cephmetrics.gauge.$cluster_name.mon.osd_bytes),maxSeries(collectd.*.$domain.cephmetrics.gauge.$cluster_name.mon.osd_bytes_avail))","textEditor":true}],"thresholds":"70,90","title":"Capacity Used","type":"singlestat","valueFontSize":"70%","valueMaps":[{"op":"=","text":"N/A","value":"null"}],"valueName":"current"},{"aliasColors":{"active + clean":"#017d01","collectd.obj-mon-1.storage.lab.cephmetrics.gauge.ceph.mon.num_pg_active_clean":"#017d01","collectd.obj-mon-1.storage.lab.cephmetrics.gauge.ceph.mon.num_pg_peering":"#052B51","peering":"#C15C17"},"cacheTimeout":null,"combine":{"label":"Others","threshold":"0.3"},"datasource":null,"fontSize":"100%","format":"short","id":74,"interval":null,"legend":{"percentage":false,"show":true,"values":false},"legendType":"Under graph","links":[{"dashUri":"db/ceph-rados","dashboard":"Ceph - RADOS","includeVars":true,"keepTime":true,"targetBlank":true,"title":"Ceph - RADOS","type":"dashboard"}],"maxDataPoints":3,"nullPointMode":"connected","pieType":"pie","span":2,"strokeWidth":1,"targets":[{"refId":"A","target":"alias(maxSeries(collectd.*.$domain.cephmetrics.gauge.$cluster_name.mon.num_pg_active_clean),\"active + clean\")","textEditor":true},{"refId":"B","target":"alias(maxSeries(collectd.*.$domain.cephmetrics.gauge.$cluster_name.mon.num_pg_peering), \"peering\")","textEditor":true}],"title":"Placement Group Status","type":"grafana-piechart-panel","valueName":"current"}],"repeat":null,"repeatIteration":null,"repeatRowId":null,"showTitle":true,"title":"At a Glance","titleSize":"h5"},{"collapse":false,"height":"180","panels":[{"cacheTimeout":null,"colorBackground":false,"colorValue":false,"colors":["rgba(245, 54, 54, 0.9)","rgba(237, 129, 40, 0.89)","rgba(50, 172, 45, 0.97)"],"datasource":"Local","decimals":0,"format":"decbytes","gauge":{"maxValue":100,"minValue":0,"show":false,"thresholdLabels":false,"thresholdMarkers":true},"id":7,"interval":null,"links":[{"dashUri":"db/ceph-backend-storage","dashboard":"Ceph Backend Storage","includeVars":true,"keepTime":true,"targetBlank":true,"title":"Ceph Backend Storage","type":"dashboard"}],"mappingType":1,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":100,"minSpan":2,"nullPointMode":"connected","nullText":null,"postfix":"/s","postfixFontSize":"50%","prefix":"","prefixFontSize":"50%","rangeMaps":[{"from":"null","text":"N/A","to":"null"}],"span":2,"sparkline":{"fillColor":"rgba(31, 118, 189, 0.18)","full":false,"lineColor":"rgb(193, 106, 31)","show":true},"tableColumn":"","targets":[{"refId":"B","target":"sumSeries(groupByNode(collectd.*.$domain.cephmetrics.gauge.$cluster_name.mon.pools.*.recovering_bytes_per_sec,-2,\"maxSeries\"))","textEditor":true}],"thresholds":"","title":"Recovery Workload","type":"singlestat","valueFontSize":"70%","valueMaps":[{"op":"=","text":"N/A","value":"null"}],"valueName":"current"},{"cacheTimeout":null,"colorBackground":false,"colorValue":false,"colors":["rgba(245, 54, 54, 0.9)","rgba(237, 129, 40, 0.89)","rgba(50, 172, 45, 0.97)"],"datasource":"Local","decimals":0,"format":"short","gauge":{"maxValue":100,"minValue":0,"show":false,"thresholdLabels":false,"thresholdMarkers":true},"id":9,"interval":null,"links":[{"dashUri":"db/ceph-frontend","dashboard":"Ceph - Frontend","includeVars":true,"keepTime":true,"targetBlank":true,"title":"Ceph - Frontend","type":"dashboard"}],"mappingType":1,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":100,"minSpan":2,"nullPointMode":"connected","nullText":null,"postfix":"","postfixFontSize":"50%","prefix":"","prefixFontSize":"50%","rangeMaps":[{"from":"null","text":"N/A","to":"null"}],"span":2,"sparkline":{"fillColor":"rgba(31, 118, 189, 0.52)","full":false,"lineColor":"rgb(31, 120, 193)","show":true},"tableColumn":"","targets":[{"dsType":"influxdb","groupBy":[],"hide":false,"measurement":"collectd.obj-mon-1.storage.lab.cephmetrics.gauge.ceph.mon.pools._all_.read_op_per_sec","policy":"default","query":"SELECT mean(\"value\") FROM \"measurement\" WHERE $timeFilter GROUP BY time($__interval) fill(null)","rawQuery":false,"refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"}]],"tags":[],"target":"sumSeries(groupByNode(collectd.*.$domain.cephmetrics.gauge.$cluster_name.mon.pools.*.op_per_sec,-2,\"maxSeries\"))","textEditor":true}],"thresholds":"","title":"Client IOPS","type":"singlestat","valueFontSize":"80%","valueMaps":[{"op":"=","text":"N/A","value":"null"}],"valueName":"current"},{"cacheTimeout":null,"colorBackground":false,"colorValue":false,"colors":["rgba(245, 54, 54, 0.9)","rgba(237, 129, 40, 0.89)","rgba(50, 172, 45, 0.97)"],"datasource":"Local","decimals":1,"format":"decbytes","gauge":{"maxValue":100,"minValue":0,"show":false,"thresholdLabels":false,"thresholdMarkers":true},"id":23,"interval":null,"links":[{"dashUri":"db/ceph-frontend","dashboard":"Ceph - Frontend","includeVars":true,"keepTime":true,"targetBlank":true,"title":"Ceph - Frontend","type":"dashboard"}],"mappingType":1,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":100,"minSpan":2,"nullPointMode":"connected","nullText":null,"postfix":"/s","postfixFontSize":"50%","prefix":"","prefixFontSize":"50%","rangeMaps":[{"from":"null","text":"N/A","to":"null"}],"span":2,"sparkline":{"fillColor":"rgba(31, 118, 189, 0.45)","full":false,"lineColor":"rgb(31, 120, 193)","show":true},"tableColumn":"","targets":[{"dsType":"influxdb","groupBy":[],"hide":false,"measurement":"collectd.obj-mon-1.storage.lab.cephmetrics.gauge.ceph.mon.pools._all_.read_op_per_sec","policy":"default","query":"SELECT \"value\" FROM \"collectd.obj-mon-1.storage.lab.cephmetrics.gauge.ceph.mon.pools._all_.read_bytes_sec\" WHERE $timeFilter","rawQuery":true,"refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"}]],"tags":[],"target":"sumSeries(groupByNode(collectd.*.$domain.cephmetrics.gauge.$cluster_name.mon.pools.*.bytes_sec,-2,\"maxSeries\"))","textEditor":true}],"thresholds":"","title":"Client Throughput","type":"singlestat","valueFontSize":"70%","valueMaps":[{"op":"=","text":"N/A","value":"null"}],"valueName":"current"},{"cacheTimeout":null,"colorBackground":false,"colorValue":false,"colors":["rgba(245, 54, 54, 0.9)","rgba(237, 129, 40, 0.89)","rgba(50, 172, 45, 0.97)"],"datasource":"Local","format":"none","gauge":{"maxValue":100,"minValue":0,"show":false,"thresholdLabels":false,"thresholdMarkers":true},"id":76,"interval":null,"links":[],"mappingType":1,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":100,"minSpan":1,"nullPointMode":"connected","nullText":null,"postfix":"","postfixFontSize":"50%","prefix":"","prefixFontSize":"50%","rangeMaps":[{"from":"null","text":"N/A","to":"null"}],"span":1,"sparkline":{"fillColor":"rgba(31, 118, 189, 0.18)","full":false,"lineColor":"rgb(31, 120, 193)","show":false},"tableColumn":"","targets":[{"dsType":"influxdb","groupBy":[],"measurement":"collectd.obj-mon-1.storage.lab.cephmetrics.gauge.ceph.mon.num_pool","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"}]],"tags":[],"target":"maxSeries(collectd.*.$domain.cephmetrics.gauge.$cluster_name.mon.num_pool)","textEditor":true}],"thresholds":"","title":"Pools","type":"singlestat","valueFontSize":"70%","valueMaps":[{"op":"=","text":"N/A","value":"null"}],"valueName":"avg"},{"cacheTimeout":null,"colorBackground":false,"colorValue":false,"colors":["rgba(245, 54, 54, 0.9)","rgba(237, 129, 40, 0.89)","rgba(50, 172, 45, 0.97)"],"datasource":null,"format":"none","gauge":{"maxValue":100,"minValue":0,"show":false,"thresholdLabels":false,"thresholdMarkers":true},"id":77,"interval":null,"links":[],"mappingType":1,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":100,"minSpan":1,"nullPointMode":"connected","nullText":null,"postfix":"","postfixFontSize":"50%","prefix":"","prefixFontSize":"50%","rangeMaps":[{"from":"null","text":"N/A","to":"null"}],"span":1,"sparkline":{"fillColor":"rgba(31, 118, 189, 0.18)","full":false,"lineColor":"rgb(31, 120, 193)","show":false},"tableColumn":"","targets":[{"refId":"A","target":"maxSeries(collectd.*.$domain.cephmetrics.gauge.$cluster_name.mon.num_rbds)","textEditor":true}],"thresholds":"","title":"RBDs","type":"singlestat","valueFontSize":"70%","valueMaps":[],"valueName":"avg"},{"cacheTimeout":null,"colorBackground":false,"colorValue":false,"colors":["rgba(245, 54, 54, 0.9)","rgba(237, 129, 40, 0.89)","rgba(50, 172, 45, 0.97)"],"datasource":null,"description":"Shows the growth rate based on osd usage over the past $growth_window.","format":"decbytes","gauge":{"maxValue":100,"minValue":0,"show":false,"thresholdLabels":false,"thresholdMarkers":true},"id":80,"interval":null,"links":[],"mappingType":1,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":100,"minSpan":1,"nullPointMode":"connected","nullText":null,"postfix":"","postfixFontSize":"50%","prefix":"","prefixFontSize":"50%","rangeMaps":[{"from":"null","text":"N/A","to":"null"}],"span":1,"sparkline":{"fillColor":"rgba(31, 118, 189, 0.18)","full":false,"lineColor":"rgb(31, 120, 193)","show":false},"tableColumn":"","targets":[{"hide":true,"refId":"A","target":"timeShift(maxSeries(collectd.*.$domain.cephmetrics.gauge.$cluster_name.mon.osd_bytes_avail), \"-$growth_window\")","textEditor":true},{"hide":true,"refId":"B","target":"maxSeries(collectd.*.$domain.cephmetrics.gauge.$cluster_name.mon.osd_bytes_avail)","textEditor":true},{"refId":"C","target":"alias(diffSeries(#A, #B), 'Growth over last week')","targetFull":"alias(diffSeries(timeShift(maxSeries(collectd.*.$domain.cephmetrics.gauge.$cluster_name.mon.osd_bytes_avail), \"-$growth_window\"), maxSeries(collectd.*.$domain.cephmetrics.gauge.$cluster_name.mon.osd_bytes_avail)), 'Growth over last week')","textEditor":true}],"thresholds":"","title":"Growth Rate","type":"singlestat","valueFontSize":"70%","valueMaps":[{"op":"=","text":"400GB","value":"null"}],"valueName":"current"},{"cacheTimeout":null,"colorBackground":false,"colorValue":false,"colors":["rgba(245, 54, 54, 0.9)","rgba(237, 129, 40, 0.89)","rgba(50, 172, 45, 0.97)"],"datasource":null,"decimals":0,"description":"Shows the estimated number of weeks left, based on consumption over the past $growth_window.","format":"short","gauge":{"maxValue":100,"minValue":0,"show":false,"thresholdLabels":false,"thresholdMarkers":true},"id":81,"interval":null,"links":[],"mappingType":1,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":100,"minSpan":1,"nullPointMode":"connected","nullText":null,"postfix":" wk","postfixFontSize":"50%","prefix":"","prefixFontSize":"50%","rangeMaps":[{"from":"null","text":"N/A","to":"null"}],"span":1,"sparkline":{"fillColor":"rgba(31, 118, 189, 0.18)","full":false,"lineColor":"rgb(31, 120, 193)","show":false},"tableColumn":"","targets":[{"hide":true,"refId":"A","target":"timeShift(maxSeries(collectd.*.$domain.cephmetrics.gauge.$cluster_name.mon.osd_bytes_avail), \"-$growth_window\")","textEditor":true},{"hide":true,"refId":"B","target":"maxSeries(collectd.*.$domain.cephmetrics.gauge.$cluster_name.mon.osd_bytes_avail)","textEditor":true},{"hide":true,"refId":"C","target":"diffSeries(#A, #B)","targetFull":"diffSeries(timeShift(maxSeries(collectd.*.$domain.cephmetrics.gauge.$cluster_name.mon.osd_bytes_avail), \"-$growth_window\"), maxSeries(collectd.*.$domain.cephmetrics.gauge.$cluster_name.mon.osd_bytes_avail))","textEditor":true},{"hide":true,"refId":"D","target":"timeShift(maxSeries(collectd.*.$domain.cephmetrics.gauge.$cluster_name.mon.osd_bytes_avail), \"-1d\")","textEditor":true},{"refId":"E","target":"alias(divideSeries(#D, #C), 'Weeks Left till full')","targetFull":"alias(divideSeries(timeShift(maxSeries(collectd.*.$domain.cephmetrics.gauge.$cluster_name.mon.osd_bytes_avail), \"-1d\"), diffSeries(timeShift(maxSeries(collectd.*.$domain.cephmetrics.gauge.$cluster_name.mon.osd_bytes_avail), \"-$growth_window\"), maxSeries(collectd.*.$domain.cephmetrics.gauge.$cluster_name.mon.osd_bytes_avail))), 'Weeks Left till full')","textEditor":true}],"thresholds":"","title":"Forecast","type":"singlestat","valueFontSize":"70%","valueMaps":[],"valueName":"current"}],"repeat":null,"repeatIteration":null,"repeatRowId":null,"showTitle":false,"title":"Performance","titleSize":"h5"},{"collapse":false,"height":"180px","panels":[{"cacheTimeout":null,"colorBackground":false,"colorValue":false,"colors":["rgba(50, 172, 45, 0.97)","rgba(237, 129, 40, 0.89)","rgba(245, 54, 54, 0.9)"],"datasource":null,"decimals":0,"description":"CPU usage is presented based on the $percentile%ile across all OSD hosts","format":"short","gauge":{"maxValue":100,"minValue":0,"show":false,"thresholdLabels":false,"thresholdMarkers":true},"id":59,"interval":null,"links":[],"mappingType":1,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":"","minSpan":2,"nullPointMode":"connected","nullText":null,"postfix":" %","postfixFontSize":"50%","prefix":"","prefixFontSize":"50%","rangeMaps":[{"from":"null","text":"N/A","to":"null"}],"span":2,"sparkline":{"fillColor":"rgba(213, 70, 70, 0.47)","full":false,"lineColor":"rgb(239, 0, 0)","show":true},"tableColumn":"","targets":[{"refId":"A","target":"percentileOfSeries(groupByNode(collectd.$osd_servers.$domain.cpu.percent.{system,user,wait},1,\"sumSeries\"),$percentile)","textEditor":true}],"thresholds":"70,90","title":"OSD Hosts CPU Busy","type":"singlestat","valueFontSize":"100%","valueMaps":[{"op":"=","text":"N/A","value":"null"}],"valueName":"current"},{"cacheTimeout":null,"colorBackground":false,"colorValue":false,"colors":["rgba(245, 54, 54, 0.9)","rgba(237, 129, 40, 0.89)","rgba(50, 172, 45, 0.97)"],"datasource":"Local","decimals":0,"description":"Total IOPS from all OSDs in the cluster","format":"short","gauge":{"maxValue":100,"minValue":0,"show":false,"thresholdLabels":false,"thresholdMarkers":true},"id":72,"interval":null,"links":[{"dashUri":"db/ceph-backend-storage","dashboard":"Ceph Backend Storage","includeVars":true,"keepTime":true,"targetBlank":true,"title":"Ceph Backend Storage","type":"dashboard"}],"mappingType":1,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":100,"minSpan":2,"nullPointMode":"connected","nullText":null,"postfix":"","postfixFontSize":"50%","prefix":"","prefixFontSize":"50%","rangeMaps":[{"from":"null","text":"N/A","to":"null"}],"span":2,"sparkline":{"fillColor":"rgba(46, 161, 15, 0.47)","full":false,"lineColor":"rgb(27, 150, 4)","show":true},"tableColumn":"","targets":[{"dsType":"influxdb","groupBy":[],"hide":false,"measurement":"collectd.obj-mon-1.storage.lab.cephmetrics.gauge.ceph.mon.pools._all_.read_op_per_sec","policy":"default","query":"SELECT \"value\" FROM \"collectd.obj-mon-1.storage.lab.cephmetrics.gauge.ceph.mon.pools._all_.read_bytes_sec\" WHERE $timeFilter","rawQuery":true,"refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"}]],"tags":[],"target":"alias(sumSeries(collectd.$osd_servers.$domain.cephmetrics.gauge.$cluster_name.osd.*.perf.iops),\"IOPS\")","textEditor":true}],"thresholds":"","title":"Disk IOPS","type":"singlestat","valueFontSize":"70%","valueMaps":[{"op":"=","text":"N/A","value":"null"}],"valueName":"current"},{"cacheTimeout":null,"colorBackground":false,"colorValue":false,"colors":["rgba(245, 54, 54, 0.9)","rgba(237, 129, 40, 0.89)","rgba(50, 172, 45, 0.97)"],"datasource":"Local","decimals":1,"format":"decbytes","gauge":{"maxValue":100,"minValue":0,"show":false,"thresholdLabels":false,"thresholdMarkers":true},"id":73,"interval":null,"links":[{"dashUri":"db/ceph-backend-storage","dashboard":"Ceph Backend Storage","includeVars":true,"keepTime":true,"targetBlank":true,"title":"Ceph Backend Storage","type":"dashboard"}],"mappingType":1,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":100,"minSpan":2,"nullPointMode":"connected","nullText":null,"postfix":"/s","postfixFontSize":"50%","prefix":"","prefixFontSize":"50%","rangeMaps":[{"from":"null","text":"N/A","to":"null"}],"span":2,"sparkline":{"fillColor":"rgba(46, 161, 15, 0.45)","full":false,"lineColor":"rgb(27, 150, 4)","show":true},"tableColumn":"","targets":[{"dsType":"influxdb","groupBy":[],"hide":false,"measurement":"collectd.obj-mon-1.storage.lab.cephmetrics.gauge.ceph.mon.pools._all_.read_op_per_sec","policy":"default","query":"SELECT \"value\" FROM \"collectd.obj-mon-1.storage.lab.cephmetrics.gauge.ceph.mon.pools._all_.read_bytes_sec\" WHERE $timeFilter","rawQuery":true,"refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"}]],"tags":[],"target":"sumSeries(collectd.$osd_servers.$domain.cephmetrics.gauge.$cluster_name.osd.*.perf.bytes_per_sec)","textEditor":true}],"thresholds":"","title":"Disk Throughput","type":"singlestat","valueFontSize":"70%","valueMaps":[{"op":"=","text":"N/A","value":"null"}],"valueName":"current"},{"cacheTimeout":null,"colorBackground":false,"colorValue":false,"colors":["rgba(245, 54, 54, 0.9)","rgba(237, 129, 40, 0.89)","rgba(50, 172, 45, 0.97)"],"datasource":null,"format":"none","gauge":{"maxValue":100,"minValue":0,"show":false,"thresholdLabels":false,"thresholdMarkers":true},"id":79,"interval":null,"links":[],"mappingType":1,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":100,"minSpan":1,"nullPointMode":"connected","nullText":null,"postfix":"","postfixFontSize":"50%","prefix":"","prefixFontSize":"50%","rangeMaps":[{"from":"null","text":"N/A","to":"null"}],"span":1,"sparkline":{"fillColor":"rgba(31, 118, 189, 0.18)","full":false,"lineColor":"rgb(31, 120, 193)","show":false},"tableColumn":"","targets":[{"refId":"A","target":"countSeries(currentAbove(collectd.$osd_servers.$domain.cephmetrics.gauge.$cluster_name.osd.*.fs_percent_used,$disk_full_threshold))","textEditor":true}],"thresholds":"","title":"Disks Near Full","type":"singlestat","valueFontSize":"80%","valueMaps":[{"op":"=","text":"N/A","value":"null"}],"valueName":"avg"},{"cacheTimeout":null,"colorBackground":true,"colorValue":false,"colors":["rgba(0,128,0, 0.97)","rgba(255,165,0,1)","rgba(245, 54, 54, 0.9)"],"datasource":null,"decimals":0,"description":"This panel shows the $percentile%ile disk await time across all OSDs in the cliuster","format":"short","gauge":{"maxValue":100,"minValue":0,"show":false,"thresholdLabels":false,"thresholdMarkers":true},"id":36,"interval":null,"links":[{"dashUri":"db/latency-by-server","dashboard":"Latency by Server","includeVars":true,"targetBlank":true,"title":"Latency by Server","type":"dashboard"}],"mappingType":1,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":"","minSpan":1,"nullPointMode":"connected","nullText":null,"postfix":" ms","postfixFontSize":"30%","prefix":"","prefixFontSize":"50%","rangeMaps":[{"from":"null","text":"N/A","to":"null"}],"span":1,"sparkline":{"fillColor":"rgba(31, 118, 189, 0.18)","full":false,"lineColor":"rgb(31, 50, 193)","show":false},"tableColumn":"","targets":[{"refId":"A","target":"percentileOfSeries(group(collectd.$osd_servers.$domain.cephmetrics.gauge.$cluster_name.osd.*.perf.await),$percentile)","textEditor":true}],"thresholds":"20,60","title":"Disk await","type":"singlestat","valueFontSize":"70%","valueMaps":[{"op":"=","text":"N/A","value":"null"}],"valueName":"current"},{"cacheTimeout":null,"colorBackground":true,"colorValue":false,"colors":["rgba(0,128,0, 0.97)","rgba(255,165,0,1)","rgba(245, 54, 54, 0.9)"],"datasource":null,"decimals":0,"description":"The $percentile%ile disk util value covers all OSDs in the cluster. A high value here serves as an indicator for how busy/disk bound the cluster is.","format":"short","gauge":{"maxValue":100,"minValue":0,"show":false,"thresholdLabels":false,"thresholdMarkers":true},"id":37,"interval":null,"links":[{"dashUri":"db/disk-busy-by-server","dashboard":"Disk Busy by Server","includeVars":true,"keepTime":false,"targetBlank":true,"title":"Disk Busy by Server","type":"dashboard"}],"mappingType":1,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":"","minSpan":1,"nullPointMode":"connected","nullText":null,"postfix":" %","postfixFontSize":"40%","prefix":"","prefixFontSize":"50%","rangeMaps":[{"from":"null","text":"N/A","to":"null"}],"span":1,"sparkline":{"fillColor":"rgba(31, 118, 189, 0.18)","full":false,"lineColor":"rgb(31, 50, 193)","show":false},"tableColumn":"","targets":[{"refId":"A","target":"percentileOfSeries(group(collectd.$osd_servers.$domain.cephmetrics.gauge.$cluster_name.osd.*.perf.util),$percentile)","textEditor":true}],"thresholds":"70,90","title":"Disk Util","type":"singlestat","valueFontSize":"70%","valueMaps":[{"op":"=","text":"N/A","value":"null"}],"valueName":"current"},{"cacheTimeout":null,"colorBackground":false,"colorValue":false,"colors":["rgba(245, 54, 54, 0.9)","rgba(237, 129, 40, 0.89)","rgba(50, 172, 45, 0.97)"],"datasource":"Local","decimals":1,"description":"RAM Usage shows the $percentile%ile of RAM used across all OSD hosts","format":"short","gauge":{"maxValue":100,"minValue":0,"show":false,"thresholdLabels":false,"thresholdMarkers":true},"id":78,"interval":null,"links":[{"dashUri":"db/ceph-backend-storage","dashboard":"Ceph Backend Storage","includeVars":true,"keepTime":true,"targetBlank":true,"title":"Ceph Backend Storage","type":"dashboard"}],"mappingType":1,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":"","minSpan":1,"nullPointMode":"connected","nullText":null,"postfix":" %","postfixFontSize":"50%","prefix":"","prefixFontSize":"50%","rangeMaps":[{"from":"null","text":"N/A","to":"null"}],"span":1,"sparkline":{"fillColor":"rgba(46, 161, 15, 0)","full":false,"lineColor":"rgb(164, 139, 4)","show":false},"tableColumn":"","targets":[{"dsType":"influxdb","groupBy":[],"hide":false,"measurement":"collectd.obj-mon-1.storage.lab.cephmetrics.gauge.ceph.mon.pools._all_.read_op_per_sec","policy":"default","query":"SELECT \"value\" FROM \"collectd.obj-mon-1.storage.lab.cephmetrics.gauge.ceph.mon.pools._all_.read_bytes_sec\" WHERE $timeFilter","rawQuery":true,"refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"}]],"tags":[],"target":"percentileOfSeries(collectd.$osd_servers.$domain.memory.percent.used,$percentile)","textEditor":true}],"thresholds":"","title":"RAM Usage","type":"singlestat","valueFontSize":"70%","valueMaps":[{"op":"=","text":"N/A","value":"null"}],"valueName":"current"}],"repeat":null,"repeatIteration":null,"repeatRowId":null,"showTitle":false,"title":"Dashboard Row","titleSize":"h6"}],"schemaVersion":14,"style":"dark","tags":["overview"],"templating":{"list":[{"allValue":null,"current":{"text":"ceph","value":"ceph"},"datasource":"Local","hide":0,"includeAll":false,"label":"Cluster Name","multi":false,"name":"cluster_name","options":[],"query":"collectd.*.$domain.cephmetrics.gauge.*","refresh":1,"regex":"","sort":0,"tagValuesQuery":"","tags":[],"tagsQuery":"","type":"query","useTags":false},{"allValue":null,"current":{"selected":true,"text":"storage.lab","value":"storage.lab"},"hide":2,"includeAll":false,"label":null,"multi":false,"name":"domain","options":[{"selected":true,"text":"storage.lab","value":"storage.lab"}],"query":"storage.lab","type":"custom"},{"allValue":null,"current":{"selected":true,"text":"95","value":"95"},"hide":0,"includeAll":false,"label":"Percentile","multi":false,"name":"percentile","options":[{"selected":false,"text":"80","value":"80"},{"selected":false,"text":"85","value":"85"},{"selected":false,"text":"90","value":"90"},{"selected":true,"text":"95","value":"95"},{"selected":false,"text":"98","value":"98"}],"query":"80,85,90,95,98","type":"custom"},{"allValue":null,"current":{"selected":true,"text":"All","value":"$__all"},"hide":2,"includeAll":true,"label":null,"multi":true,"name":"osd_servers","options":[{"selected":true,"text":"All","value":"$__all"},{"selected":false,"text":"obj-osd-1","value":"obj-osd-1"},{"selected":false,"text":"obj-osd-2","value":"obj-osd-2"},{"selected":false,"text":"obj-osd-3","value":"obj-osd-3"}],"query":"obj-osd-1,obj-osd-2,obj-osd-3","type":"custom"},{"allValue":null,"current":{"selected":true,"text":"obj-rgw-1","value":"obj-rgw-1"},"hide":2,"includeAll":false,"label":null,"multi":true,"name":"rgw_servers","options":[{"selected":true,"text":"obj-rgw-1","value":"obj-rgw-1"}],"query":"obj-rgw-1","type":"custom"},{"allValue":null,"current":{"text":"All","value":"$__all"},"datasource":"Local","hide":2,"includeAll":true,"label":null,"multi":true,"name":"mon_servers","options":[],"query":"collectd.*.$domain.cephmetrics.gauge.$cluster_name.mon.mon_status.*","refresh":1,"regex":"","sort":0,"tagValuesQuery":"","tags":[],"tagsQuery":"","type":"query","useTags":false},{"allValue":null,"current":{"text":"2","value":"2"},"hide":2,"includeAll":false,"label":null,"multi":false,"name":"disk_full_threshold","options":[{"selected":true,"text":"2","value":"2"}],"query":"2","type":"custom"},{"allValue":null,"current":{"text":"7d","value":"7d"},"hide":2,"includeAll":false,"label":null,"multi":false,"name":"growth_window","options":[{"selected":true,"text":"7d","value":"7d"}],"query":"7d","type":"custom"}]},"time":{"from":"now-1h","to":"now"},"timepicker":{"refresh_intervals":["5s","10s","30s","1m","5m","15m","30m","1h","2h","1d"],"time_options":["5m","15m","1h","6h","12h","24h","2d","7d","30d"]},"timezone":"browser","title":"Ceph - At A Glance","version":110}}