{"meta":{"type":"db","canSave":true,"canEdit":true,"canStar":true,"slug":"ceph-rgw-workload","expires":"0001-01-01T00:00:00Z","created":"2017-06-20T02:33:41Z","updated":"2017-06-20T03:30:23Z","updatedBy":"admin","createdBy":"admin","version":2},"dashboard":{"annotations":{"list":[]},"editable":true,"gnetId":null,"graphTooltip":0,"hideControls":false,"id":5,"links":[{"asDropdown":true,"icon":"external link","includeVars":true,"keepTime":true,"tags":["overview"],"targetBlank":true,"title":"Shortcuts","type":"dashboards"}],"refresh":"10s","rows":[{"collapse":false,"height":307,"panels":[{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"Local","fill":1,"id":19,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"minSpan":5,"nullPointMode":"connected","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"span":3,"stack":false,"steppedLine":false,"targets":[{"alias":"GET","dsType":"influxdb","groupBy":[{"params":["$interval"],"type":"time"}],"hide":true,"measurement":"collectd.obj-mon-1.storage.lab.cephmetrics.gauge.ceph.rgw.get_initial_lat","policy":"default","query":"SELECT mean(\"value\") FROM /collectd.$rgw_name.cephmetrics.gauge.$cluster_name.rgw.get_initial_lat/ WHERE $timeFilter GROUP BY time($interval)","rawQuery":true,"refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"tags":[],"target":"collectd.$rgw_servers.$domain.cephmetrics.derive.$cluster_name.rgw.get_initial_lat_avgcount"},{"alias":"GET","dsType":"influxdb","groupBy":[{"params":["$interval"],"type":"time"}],"hide":true,"measurement":"collectd.obj-mon-1.storage.lab.cephmetrics.gauge.ceph.rgw.get_initial_lat","policy":"default","query":"SELECT mean(\"value\") FROM /collectd.$rgw_name.cephmetrics.gauge.$cluster_name.rgw.get_initial_lat/ WHERE $timeFilter GROUP BY time($interval)","rawQuery":true,"refId":"B","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"tags":[],"target":"collectd.$rgw_servers.$domain.cephmetrics.derive.$cluster_name.rgw.get_initial_lat_sum"},{"refId":"C","target":"alias(divideSeries(#B, #A),\"GET\")","targetFull":"alias(divideSeries(collectd.$rgw_servers.$domain.cephmetrics.derive.$cluster_name.rgw.get_initial_lat_sum, collectd.$rgw_servers.$domain.cephmetrics.derive.$cluster_name.rgw.get_initial_lat_avgcount),\"GET\")","textEditor":true},{"alias":"GET","dsType":"influxdb","groupBy":[{"params":["$interval"],"type":"time"}],"hide":true,"measurement":"collectd.obj-mon-1.storage.lab.cephmetrics.gauge.ceph.rgw.get_initial_lat","policy":"default","query":"SELECT mean(\"value\") FROM /collectd.$rgw_name.cephmetrics.gauge.$cluster_name.rgw.get_initial_lat/ WHERE $timeFilter GROUP BY time($interval)","rawQuery":true,"refId":"D","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"tags":[],"target":"collectd.$rgw_servers.$domain.cephmetrics.derive.$cluster_name.rgw.put_initial_lat_avgcount"},{"alias":"GET","dsType":"influxdb","groupBy":[{"params":["$interval"],"type":"time"}],"hide":true,"measurement":"collectd.obj-mon-1.storage.lab.cephmetrics.gauge.ceph.rgw.get_initial_lat","policy":"default","query":"SELECT mean(\"value\") FROM /collectd.$rgw_name.cephmetrics.gauge.$cluster_name.rgw.get_initial_lat/ WHERE $timeFilter GROUP BY time($interval)","rawQuery":true,"refId":"E","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"tags":[],"target":"collectd.$rgw_servers.$domain.cephmetrics.derive.$cluster_name.rgw.put_initial_lat_sum"},{"refId":"F","target":"alias(divideSeries(#E,#D), \"PUT\")","targetFull":"alias(divideSeries(collectd.$rgw_servers.$domain.cephmetrics.derive.$cluster_name.rgw.put_initial_lat_sum,collectd.$rgw_servers.$domain.cephmetrics.derive.$cluster_name.rgw.put_initial_lat_avgcount), \"PUT\")","textEditor":true}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Request Latency","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"s","label":null,"logBase":1,"max":null,"min":"0","show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":false}]},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"Local","fill":1,"id":25,"legend":{"alignAsTable":false,"avg":false,"current":false,"max":false,"min":false,"rightSide":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"minSpan":5,"nullPointMode":"connected","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"span":3,"stack":true,"steppedLine":false,"targets":[{"alias":"GET","dsType":"influxdb","groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"measurement":"collectd.obj-rgw-1.storage.lab.cephmetrics.derive.ceph.rgw.get","policy":"default","query":"SELECT mean(\"value\") FROM /collectd.$rgw_name.cephmetrics.derive.ceph.rgw.get$/ WHERE $timeFilter GROUP BY time($__interval) fill(null)","rawQuery":true,"refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"tags":[],"target":"alias(collectd.$rgw_servers.$domain.cephmetrics.derive.$cluster_name.rgw.get, 'GET')"},{"alias":"PUT","dsType":"influxdb","groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"measurement":"collectd.obj-rgw-1.storage.lab.cephmetrics.derive.ceph.rgw.get","policy":"default","query":"SELECT mean(\"value\") FROM /collectd.$rgw_name.cephmetrics.derive.ceph.rgw.put$/ WHERE $timeFilter GROUP BY time($__interval) fill(null)","rawQuery":true,"refId":"B","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"tags":[],"target":"alias(collectd.$rgw_servers.$domain.cephmetrics.derive.$cluster_name.rgw.put, 'PUT')"}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Requests/sec","tooltip":{"shared":true,"sort":1,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":"0","show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":false}]},{"cacheTimeout":null,"colorBackground":false,"colorValue":false,"colors":["rgba(245, 54, 54, 0.9)","rgba(237, 129, 40, 0.89)","rgba(50, 172, 45, 0.97)"],"datasource":"Local","format":"none","gauge":{"maxValue":100,"minValue":0,"show":false,"thresholdLabels":false,"thresholdMarkers":true},"height":"","id":26,"interval":null,"links":[],"mappingType":1,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":100,"minSpan":1,"nullPointMode":"connected","nullText":null,"postfix":"","postfixFontSize":"50%","prefix":"","prefixFontSize":"50%","rangeMaps":[{"from":"null","text":"N/A","to":"null"}],"span":1,"sparkline":{"fillColor":"rgba(31, 118, 189, 0.18)","full":false,"lineColor":"rgb(31, 120, 193)","show":false},"tableColumn":"","targets":[{"dsType":"influxdb","groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"measurement":"collectd.obj-rgw-1.storage.lab.cephmetrics.derive.ceph.rgw.qlen","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"tags":[],"target":"collectd.$rgw_servers.$domain.cephmetrics.derive.$cluster_name.rgw.qlen"}],"thresholds":"","title":"Queue","type":"singlestat","valueFontSize":"80%","valueMaps":[{"op":"=","text":"N/A","value":"null"}],"valueName":"avg"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":null,"fill":1,"id":32,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":false,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"minSpan":2,"nullPointMode":"connected","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"span":2,"stack":true,"steppedLine":false,"targets":[{"refId":"A","target":"aliasByMetric(collectd.$rgw_servers.$domain.cpu.percent.{user,system,wait,steal,softirq,interrupt})","textEditor":true}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"CPU Busy","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"percent","label":"","logBase":1,"max":"100","min":"0","show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":false}]},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":null,"fill":1,"id":31,"legend":{"avg":false,"current":true,"max":false,"min":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"minSpan":3,"nullPointMode":"connected","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"span":3,"stack":true,"steppedLine":false,"targets":[{"refId":"A","target":"alias(sumSeries(collectd.$rgw_servers.$domain.interface.*.if_octets.rx), 'rx')"},{"refId":"B","target":"alias(sumSeries(collectd.$rgw_servers.$domain.interface.*.if_octets.tx), 'tx')"}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Network Load","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"Bps","label":null,"logBase":1,"max":null,"min":"0","show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":false}]}],"repeat":null,"repeatIteration":null,"repeatRowId":null,"showTitle":true,"title":"RGW Host(s) (S3/Swift)","titleSize":"h6"}],"schemaVersion":14,"style":"dark","tags":["overview"],"templating":{"list":[{"current":{"selected":true,"text":"obj-mon-1.storage.lab","value":"obj-mon-1.storage.lab"},"hide":2,"label":null,"name":"monitor","options":[{"selected":true,"text":"obj-mon-1.storage.lab","value":"obj-mon-1.storage.lab"}],"query":"obj-mon-1.storage.lab","type":"constant"},{"allValue":null,"current":{"selected":true,"text":"ceph","value":"ceph"},"datasource":"Local","hide":2,"includeAll":false,"label":null,"multi":false,"name":"cluster_name","options":[],"query":"collectd.*.$domain.cephmetrics.gauge.*","refresh":1,"regex":"","sort":0,"tagValuesQuery":"","tags":[],"tagsQuery":"","type":"query","useTags":false},{"allValue":null,"current":{"selected":true,"text":"ceph.redhat.com","value":"ceph.redhat.com"},"hide":2,"includeAll":false,"label":null,"multi":false,"name":"domain","options":[{"selected":true,"text":"ceph.redhat.com","value":"ceph.redhat.com"}],"query":"ceph.redhat.com","type":"custom"},{"allValue":null,"current":{"selected":true,"text":"obj-rgw-1","value":"obj-rgw-1"},"hide":0,"includeAll":false,"label":null,"multi":true,"name":"rgw_servers","options":[{"selected":true,"text":"obj-rgw-1","value":"obj-rgw-1"}],"query":"obj-rgw-1","type":"custom"}]},"time":{"from":"now-1h","to":"now"},"timepicker":{"refresh_intervals":["5s","10s","30s","1m","5m","15m","30m","1h","2h","1d"],"time_options":["5m","15m","1h","6h","12h","24h","2d","7d","30d"]},"timezone":"browser","title":"Ceph - RGW Workload","version":2}}