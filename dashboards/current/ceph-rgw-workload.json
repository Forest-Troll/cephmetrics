{"meta":{"type":"db","canSave":true,"canEdit":true,"canStar":true,"slug":"ceph-rgw-workload","expires":"0001-01-01T00:00:00Z","created":"2017-06-21T03:22:49Z","updated":"2017-06-23T00:20:08Z","updatedBy":"admin@localhost","createdBy":"admin@localhost","version":17},"dashboard":{"annotations":{"list":[]},"editable":false,"gnetId":null,"graphTooltip":0,"hideControls":true,"id":18,"links":[{"asDropdown":true,"icon":"external link","includeVars":true,"keepTime":true,"tags":["overview"],"targetBlank":true,"title":"Shortcuts","type":"dashboards"}],"refresh":"10s","rows":[{"collapse":false,"height":250,"panels":[{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"Local","fill":1,"id":34,"legend":{"alignAsTable":false,"avg":false,"current":false,"max":false,"min":false,"rightSide":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"minSpan":4,"nullPointMode":"connected","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"span":4,"stack":true,"steppedLine":false,"targets":[{"refId":"C","target":"groupByNode(collectd.*.$domain.cephmetrics.derive.$cluster_name.rgw.{get,put}, 1, \"sumSeries\")","textEditor":true}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Total Requests/sec - All RADOS Gateways","tooltip":{"shared":true,"sort":1,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":"0","show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":false}]},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"Local","fill":1,"id":35,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"minSpan":4,"nullPointMode":"null as zero","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"span":4,"stack":false,"steppedLine":false,"targets":[{"alias":"GET","dsType":"influxdb","groupBy":[{"params":["$interval"],"type":"time"}],"hide":true,"measurement":"collectd.obj-mon-1.storage.lab.cephmetrics.gauge.ceph.rgw.get_initial_lat","policy":"default","query":"SELECT mean(\"value\") FROM /collectd.$rgw_name.cephmetrics.gauge.$cluster_name.rgw.get_initial_lat/ WHERE $timeFilter GROUP BY time($interval)","rawQuery":true,"refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"tags":[],"target":"sumSeries(collectd.*.$domain.cephmetrics.derive.$cluster_name.rgw.get_initial_lat_avgcount)","textEditor":true},{"alias":"GET","dsType":"influxdb","groupBy":[{"params":["$interval"],"type":"time"}],"hide":true,"measurement":"collectd.obj-mon-1.storage.lab.cephmetrics.gauge.ceph.rgw.get_initial_lat","policy":"default","query":"SELECT mean(\"value\") FROM /collectd.$rgw_name.cephmetrics.gauge.$cluster_name.rgw.get_initial_lat/ WHERE $timeFilter GROUP BY time($interval)","rawQuery":true,"refId":"B","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"tags":[],"target":"sumSeries(collectd.*.$domain.cephmetrics.derive.$cluster_name.rgw.get_initial_lat_sum)","textEditor":true},{"refId":"C","target":"alias(divideSeries(#B, #A),\"GET\")","targetFull":"alias(divideSeries(sumSeries(collectd.*.$domain.cephmetrics.derive.$cluster_name.rgw.get_initial_lat_sum), sumSeries(collectd.*.$domain.cephmetrics.derive.$cluster_name.rgw.get_initial_lat_avgcount)),\"GET\")","textEditor":true},{"alias":"GET","dsType":"influxdb","groupBy":[{"params":["$interval"],"type":"time"}],"hide":true,"measurement":"collectd.obj-mon-1.storage.lab.cephmetrics.gauge.ceph.rgw.get_initial_lat","policy":"default","query":"SELECT mean(\"value\") FROM /collectd.$rgw_name.cephmetrics.gauge.$cluster_name.rgw.get_initial_lat/ WHERE $timeFilter GROUP BY time($interval)","rawQuery":true,"refId":"D","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"tags":[],"target":"sumSeries(collectd.*.$domain.cephmetrics.derive.$cluster_name.rgw.put_initial_lat_avgcount)","textEditor":true},{"alias":"GET","dsType":"influxdb","groupBy":[{"params":["$interval"],"type":"time"}],"hide":true,"measurement":"collectd.obj-mon-1.storage.lab.cephmetrics.gauge.ceph.rgw.get_initial_lat","policy":"default","query":"SELECT mean(\"value\") FROM /collectd.$rgw_name.cephmetrics.gauge.$cluster_name.rgw.get_initial_lat/ WHERE $timeFilter GROUP BY time($interval)","rawQuery":true,"refId":"E","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"tags":[],"target":"sumSeries(collectd.*.$domain.cephmetrics.derive.$cluster_name.rgw.put_initial_lat_sum)","textEditor":true},{"refId":"F","target":"alias(divideSeries(#E,#D), \"PUT\")","targetFull":"alias(divideSeries(sumSeries(collectd.*.$domain.cephmetrics.derive.$cluster_name.rgw.put_initial_lat_sum),sumSeries(collectd.*.$domain.cephmetrics.derive.$cluster_name.rgw.put_initial_lat_avgcount)), \"PUT\")","textEditor":true}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Average Request Latency - All RADOS Gateways","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"s","label":null,"logBase":1,"max":null,"min":"0","show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":false}]},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":null,"fill":1,"id":37,"legend":{"alignAsTable":false,"avg":false,"current":false,"max":false,"min":false,"rightSide":false,"show":false,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"minSpan":2,"nullPointMode":"null as zero","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"span":2,"stack":true,"steppedLine":false,"targets":[{"refId":"A","target":"aliasByNode(collectd.*.$domain.cephmetrics.derive.$cluster_name.rgw.qlen,1)","textEditor":true}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Request Queues","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":"0","show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":false}]},{"cacheTimeout":null,"colorBackground":false,"colorValue":false,"colors":["rgba(50, 172, 45, 0.97)","rgba(237, 129, 40, 0.89)","rgba(245, 54, 54, 0.9)"],"datasource":null,"decimals":0,"format":"short","gauge":{"maxValue":100,"minValue":0,"show":false,"thresholdLabels":false,"thresholdMarkers":true},"id":38,"interval":null,"links":[],"mappingType":1,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":"","minSpan":2,"nullPointMode":"connected","nullText":null,"postfix":" %","postfixFontSize":"50%","prefix":"","prefixFontSize":"50%","rangeMaps":[{"from":"null","text":"N/A","to":"null"}],"span":2,"sparkline":{"fillColor":"rgba(213, 70, 70, 0.18)","full":false,"lineColor":"rgb(239, 0, 0)","show":true},"tableColumn":"","targets":[{"refId":"A","target":"percentileOfSeries(groupByNode(collectd.$rgw_servers.$domain.cpu.percent.{system,user,wait},1,\"sumSeries\"),$percentile)","textEditor":true}],"thresholds":"70,90","title":"RGW Hosts - CPU @ $percentile%ile","type":"singlestat","valueFontSize":"100%","valueMaps":[{"op":"=","text":"N/A","value":"null"}],"valueName":"current"}],"repeat":null,"repeatIteration":null,"repeatRowId":null,"showTitle":true,"title":"RadosGW Overview - All Gateways","titleSize":"h5"},{"collapse":true,"height":"300","panels":[{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"Local","fill":1,"id":25,"legend":{"alignAsTable":false,"avg":false,"current":false,"max":false,"min":false,"rightSide":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"minSpan":4,"nullPointMode":"connected","percentage":false,"pointradius":5,"points":false,"renderer":"flot","scopedVars":{"rgw_servers":{"selected":true,"text":"obj-rgw-1","value":"obj-rgw-1"}},"seriesOverrides":[],"spaceLength":10,"span":4,"stack":true,"steppedLine":false,"targets":[{"alias":"GET","dsType":"influxdb","groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"measurement":"collectd.obj-rgw-1.storage.lab.cephmetrics.derive.ceph.rgw.get","policy":"default","query":"SELECT mean(\"value\") FROM /collectd.$rgw_name.cephmetrics.derive.ceph.rgw.get$/ WHERE $timeFilter GROUP BY time($__interval) fill(null)","rawQuery":true,"refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"tags":[],"target":"alias(collectd.$rgw_servers.$domain.cephmetrics.derive.$cluster_name.rgw.get, 'GET')"},{"alias":"PUT","dsType":"influxdb","groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"measurement":"collectd.obj-rgw-1.storage.lab.cephmetrics.derive.ceph.rgw.get","policy":"default","query":"SELECT mean(\"value\") FROM /collectd.$rgw_name.cephmetrics.derive.ceph.rgw.put$/ WHERE $timeFilter GROUP BY time($__interval) fill(null)","rawQuery":true,"refId":"B","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"tags":[],"target":"alias(collectd.$rgw_servers.$domain.cephmetrics.derive.$cluster_name.rgw.put, 'PUT')"}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Requests/sec","tooltip":{"shared":true,"sort":1,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":"0","show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":false}]},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"Local","fill":1,"id":19,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"minSpan":4,"nullPointMode":"null as zero","percentage":false,"pointradius":5,"points":false,"renderer":"flot","scopedVars":{"rgw_servers":{"selected":true,"text":"obj-rgw-1","value":"obj-rgw-1"}},"seriesOverrides":[],"spaceLength":10,"span":4,"stack":false,"steppedLine":false,"targets":[{"alias":"GET","dsType":"influxdb","groupBy":[{"params":["$interval"],"type":"time"}],"hide":true,"measurement":"collectd.obj-mon-1.storage.lab.cephmetrics.gauge.ceph.rgw.get_initial_lat","policy":"default","query":"SELECT mean(\"value\") FROM /collectd.$rgw_name.cephmetrics.gauge.$cluster_name.rgw.get_initial_lat/ WHERE $timeFilter GROUP BY time($interval)","rawQuery":true,"refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"tags":[],"target":"collectd.$rgw_servers.$domain.cephmetrics.derive.$cluster_name.rgw.get_initial_lat_avgcount"},{"alias":"GET","dsType":"influxdb","groupBy":[{"params":["$interval"],"type":"time"}],"hide":true,"measurement":"collectd.obj-mon-1.storage.lab.cephmetrics.gauge.ceph.rgw.get_initial_lat","policy":"default","query":"SELECT mean(\"value\") FROM /collectd.$rgw_name.cephmetrics.gauge.$cluster_name.rgw.get_initial_lat/ WHERE $timeFilter GROUP BY time($interval)","rawQuery":true,"refId":"B","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"tags":[],"target":"collectd.$rgw_servers.$domain.cephmetrics.derive.$cluster_name.rgw.get_initial_lat_sum"},{"refId":"C","target":"alias(divideSeries(#B, #A),\"GET\")","targetFull":"alias(divideSeries(collectd.$rgw_servers.$domain.cephmetrics.derive.$cluster_name.rgw.get_initial_lat_sum, collectd.$rgw_servers.$domain.cephmetrics.derive.$cluster_name.rgw.get_initial_lat_avgcount),\"GET\")","textEditor":true},{"alias":"GET","dsType":"influxdb","groupBy":[{"params":["$interval"],"type":"time"}],"hide":true,"measurement":"collectd.obj-mon-1.storage.lab.cephmetrics.gauge.ceph.rgw.get_initial_lat","policy":"default","query":"SELECT mean(\"value\") FROM /collectd.$rgw_name.cephmetrics.gauge.$cluster_name.rgw.get_initial_lat/ WHERE $timeFilter GROUP BY time($interval)","rawQuery":true,"refId":"D","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"tags":[],"target":"collectd.$rgw_servers.$domain.cephmetrics.derive.$cluster_name.rgw.put_initial_lat_avgcount"},{"alias":"GET","dsType":"influxdb","groupBy":[{"params":["$interval"],"type":"time"}],"hide":true,"measurement":"collectd.obj-mon-1.storage.lab.cephmetrics.gauge.ceph.rgw.get_initial_lat","policy":"default","query":"SELECT mean(\"value\") FROM /collectd.$rgw_name.cephmetrics.gauge.$cluster_name.rgw.get_initial_lat/ WHERE $timeFilter GROUP BY time($interval)","rawQuery":true,"refId":"E","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"tags":[],"target":"collectd.$rgw_servers.$domain.cephmetrics.derive.$cluster_name.rgw.put_initial_lat_sum"},{"refId":"F","target":"alias(divideSeries(#E,#D), \"PUT\")","targetFull":"alias(divideSeries(collectd.$rgw_servers.$domain.cephmetrics.derive.$cluster_name.rgw.put_initial_lat_sum,collectd.$rgw_servers.$domain.cephmetrics.derive.$cluster_name.rgw.put_initial_lat_avgcount), \"PUT\")","textEditor":true}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Request Latency","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"s","label":null,"logBase":1,"max":null,"min":"0","show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":false}]},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":null,"fill":1,"id":32,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":false,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"minSpan":2,"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","scopedVars":{"rgw_servers":{"selected":true,"text":"obj-rgw-1","value":"obj-rgw-1"}},"seriesOverrides":[],"spaceLength":10,"span":2,"stack":true,"steppedLine":false,"targets":[{"refId":"A","target":"aliasByMetric(collectd.$rgw_servers.$domain.cpu.percent.{user,system,wait,steal,softirq,interrupt})","textEditor":true}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"CPU Utilization (%)","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"percent","label":"","logBase":1,"max":"100","min":"0","show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":false}]},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":null,"fill":1,"id":31,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"minSpan":2,"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","scopedVars":{"rgw_servers":{"selected":true,"text":"obj-rgw-1","value":"obj-rgw-1"}},"seriesOverrides":[],"spaceLength":10,"span":2,"stack":true,"steppedLine":false,"targets":[{"refId":"A","target":"alias(sumSeries(collectd.$rgw_servers.$domain.interface.*.if_octets.rx), 'rx')"},{"refId":"B","target":"alias(sumSeries(collectd.$rgw_servers.$domain.interface.*.if_octets.tx), 'tx')"}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Network Load","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"Bps","label":null,"logBase":1,"max":null,"min":"0","show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":false}]}],"repeat":"rgw_servers","repeatIteration":null,"repeatRowId":null,"showTitle":true,"title":"RGW Host : $rgw_servers","titleSize":"h5"}],"schemaVersion":14,"style":"dark","tags":["overview"],"templating":{"list":[{"allValue":null,"current":{"selected":true,"text":"ceph","value":"ceph"},"datasource":"Local","hide":2,"includeAll":false,"label":null,"multi":false,"name":"cluster_name","options":[],"query":"collectd.*.$domain.cephmetrics.gauge.*","refresh":1,"regex":"","sort":0,"tagValuesQuery":"","tags":[],"tagsQuery":"","type":"query","useTags":false},{"allValue":null,"current":{"selected":true,"text":"storage.lab","value":"storage.lab"},"hide":2,"includeAll":false,"label":null,"multi":false,"name":"domain","options":[{"selected":true,"text":"storage.lab","value":"storage.lab"}],"query":"storage.lab","type":"custom"},{"allValue":null,"current":{"selected":true,"text":"obj-rgw-1","value":"obj-rgw-1"},"hide":2,"includeAll":true,"label":null,"multi":true,"name":"rgw_servers","options":[{"selected":true,"text":"obj-rgw-1","value":"obj-rgw-1"}],"query":"obj-rgw-1","type":"custom"},{"allValue":null,"current":{"selected":true,"text":"95","value":"95"},"hide":2,"includeAll":false,"label":null,"multi":true,"name":"percentile","options":[{"selected":false,"text":"90","value":"90"},{"selected":true,"text":"95","value":"95"},{"selected":false,"text":"98","value":"98"}],"query":"90,95,98","type":"custom"}]},"time":{"from":"now-1h","to":"now"},"timepicker":{"refresh_intervals":["5s","10s","30s","1m","5m","15m","30m","1h","2h","1d"],"time_options":["5m","15m","1h","6h","12h","24h","2d","7d","30d"]},"timezone":"browser","title":"Ceph - RGW Workload","version":17}}