{
   "meta" : {
      "expires" : "0001-01-01T00:00:00Z",
      "canSave" : true,
      "created" : "2017-08-03T21:42:28Z",
      "canStar" : true,
      "slug" : "alert-status",
      "createdBy" : "admin",
      "canEdit" : true,
      "updated" : "2017-08-18T05:26:10Z",
      "version" : 15,
      "updatedBy" : "admin",
      "type" : "db"
   },
   "dashboard" : {
      "version" : 15,
      "timepicker" : {
         "time_options" : [
            "5m",
            "15m",
            "1h",
            "6h",
            "12h",
            "24h",
            "2d",
            "7d",
            "30d"
         ],
         "refresh_intervals" : [
            "5s",
            "10s",
            "30s",
            "1m",
            "5m",
            "15m",
            "30m",
            "1h",
            "2h",
            "1d"
         ]
      },
      "refresh" : "10s",
      "hideControls" : true,
      "id" : 24,
      "annotations" : {
         "list" : []
      },
      "style" : "dark",
      "gnetId" : null,
      "timezone" : "browser",
      "schemaVersion" : 14,
      "time" : {
         "from" : "now-1h",
         "to" : "now"
      },
      "rows" : [
         {
            "panels" : [
               {
                  "limit" : "20",
                  "title" : "Active Ceph Alert List",
                  "span" : 12,
                  "id" : 1,
                  "sortOrder" : 3,
                  "onlyAlertsOnDashboard" : true,
                  "links" : [],
                  "show" : "current",
                  "type" : "alertlist",
                  "stateFilter" : [
                     "alerting"
                  ]
               }
            ],
            "repeatIteration" : null,
            "repeat" : null,
            "showTitle" : false,
            "collapse" : false,
            "title" : "Dashboard Row",
            "repeatRowId" : null,
            "height" : "250px",
            "titleSize" : "h6"
         },
         {
            "height" : 250,
            "titleSize" : "h5",
            "title" : "Health Checks",
            "collapse" : false,
            "repeatRowId" : null,
            "showTitle" : true,
            "panels" : [
               {
                  "legend" : {
                     "min" : false,
                     "values" : false,
                     "current" : false,
                     "show" : true,
                     "total" : false,
                     "avg" : false,
                     "max" : false
                  },
                  "dashes" : false,
                  "hideTimeOverride" : false,
                  "percentage" : false,
                  "maxDataPoints" : "360",
                  "alert" : {
                     "notifications" : [
                        {
                           "id" : 1
                        }
                     ],
                     "name" : "Overall Ceph Health",
                     "conditions" : [
                        {
                           "query" : {
                              "params" : [
                                 "A",
                                 "20s",
                                 "now"
                              ]
                           },
                           "reducer" : {
                              "params" : [],
                              "type" : "last"
                           },
                           "operator" : {
                              "type" : "and"
                           },
                           "evaluator" : {
                              "type" : "gt",
                              "params" : [
                                 0
                              ]
                           },
                           "type" : "query"
                        }
                     ],
                     "message" : "Cluster Health is not OK",
                     "handler" : 1,
                     "frequency" : "10s",
                     "executionErrorState" : "keep_state",
                     "noDataState" : "no_data"
                  },
                  "id" : 2,
                  "points" : false,
                  "spaceLength" : 10,
                  "renderer" : "flot",
                  "minSpan" : 2,
                  "dashLength" : 10,
                  "pointradius" : 5,
                  "xaxis" : {
                     "values" : [],
                     "name" : null,
                     "show" : true,
                     "buckets" : null,
                     "mode" : "time"
                  },
                  "yaxes" : [
                     {
                        "format" : "short",
                        "max" : "10",
                        "label" : "",
                        "show" : true,
                        "min" : "0",
                        "logBase" : 1
                     },
                     {
                        "max" : null,
                        "format" : "short",
                        "show" : false,
                        "label" : null,
                        "logBase" : 1,
                        "min" : null
                     }
                  ],
                  "bars" : false,
                  "description" : "The chart plots the clusters health, over time. Health is depicted as a integer; 0, 4 or 8 where 0 is OK, 4 is WARN and 8 represents an ERROR state.",
                  "thresholds" : [
                     {
                        "fill" : true,
                        "colorMode" : "critical",
                        "op" : "gt",
                        "line" : true,
                        "value" : 0
                     }
                  ],
                  "tooltip" : {
                     "shared" : false,
                     "value_type" : "individual",
                     "sort" : 1
                  },
                  "targets" : [
                     {
                        "target" : "alias(maxSeries(consolidateBy(keepLastValue(transformNull(collectd.*.$domain.cephmetrics.gauge.*.mon.health,0)),\"max\")),\"Ceph Health\")",
                        "textEditor" : true,
                        "refId" : "A"
                     }
                  ],
                  "linewidth" : 2,
                  "stack" : false,
                  "title" : "Overall Ceph Health",
                  "nullPointMode" : "null",
                  "span" : 2,
                  "seriesOverrides" : [],
                  "lines" : true,
                  "datasource" : "Local",
                  "fill" : 1,
                  "timeShift" : null,
                  "links" : [],
                  "type" : "graph",
                  "timeFrom" : null,
                  "steppedLine" : true,
                  "aliasColors" : {
                     "Ceph Health" : "#890F02",
                     "Ceph Health (0:OK, 4:Warning,8:Error)" : "#DEDAF7",
                     "ceph health" : "#890F02"
                  }
               },
               {
                  "percentage" : false,
                  "dashes" : false,
                  "legend" : {
                     "current" : false,
                     "show" : false,
                     "min" : false,
                     "values" : false,
                     "max" : false,
                     "total" : false,
                     "avg" : false
                  },
                  "spaceLength" : 10,
                  "id" : 3,
                  "points" : false,
                  "alert" : {
                     "name" : "Disks Near Full",
                     "notifications" : [
                        {
                           "id" : 1
                        }
                     ],
                     "message" : "DIsks Near full detected within the cluster. Warning threshold is 80% full.",
                     "conditions" : [
                        {
                           "operator" : {
                              "type" : "and"
                           },
                           "reducer" : {
                              "type" : "max",
                              "params" : []
                           },
                           "query" : {
                              "params" : [
                                 "A",
                                 "1m",
                                 "now"
                              ]
                           },
                           "type" : "query",
                           "evaluator" : {
                              "params" : [
                                 0
                              ],
                              "type" : "gt"
                           }
                        }
                     ],
                     "frequency" : "60s",
                     "executionErrorState" : "keep_state",
                     "handler" : 1,
                     "noDataState" : "ok"
                  },
                  "pointradius" : 5,
                  "renderer" : "flot",
                  "minSpan" : 2,
                  "dashLength" : 10,
                  "yaxes" : [
                     {
                        "min" : "0",
                        "logBase" : 1,
                        "label" : null,
                        "show" : true,
                        "format" : "short",
                        "max" : null
                     },
                     {
                        "label" : null,
                        "show" : false,
                        "min" : null,
                        "logBase" : 1,
                        "format" : "short",
                        "max" : null
                     }
                  ],
                  "xaxis" : {
                     "mode" : "time",
                     "values" : [],
                     "name" : null,
                     "show" : true,
                     "buckets" : null
                  },
                  "description" : "This shows how many disks are at or above 80% full. Performance may degrade beyond this threshold on filestore (XFS) backed OSD's.",
                  "bars" : false,
                  "tooltip" : {
                     "value_type" : "individual",
                     "sort" : 0,
                     "shared" : true
                  },
                  "targets" : [
                     {
                        "textEditor" : true,
                        "target" : "currentAbove(transformNull(keepLastValue(collectd.*.$domain.cephmetrics.gauge.*.osd.*.osd_percent_used),0),85)",
                        "refId" : "A",
                        "hide" : true
                     },
                     {
                        "target" : "alias(countSeries(#A),\"OSDs Near Full\")",
                        "textEditor" : true,
                        "refId" : "B",
                        "targetFull" : "alias(countSeries(currentAbove(transformNull(keepLastValue(collectd.*.$domain.cephmetrics.gauge.*.osd.*.osd_percent_used),0),85)),\"OSDs Near Full\")"
                     }
                  ],
                  "linewidth" : 1,
                  "thresholds" : [
                     {
                        "colorMode" : "critical",
                        "fill" : true,
                        "value" : 0,
                        "op" : "gt",
                        "line" : true
                     }
                  ],
                  "datasource" : "Local",
                  "lines" : true,
                  "title" : "Disks Near Full",
                  "stack" : false,
                  "nullPointMode" : "null",
                  "span" : 2,
                  "seriesOverrides" : [],
                  "aliasColors" : {},
                  "steppedLine" : false,
                  "timeShift" : null,
                  "links" : [],
                  "fill" : 1,
                  "type" : "graph",
                  "timeFrom" : null
               },
               {
                  "hideTimeOverride" : true,
                  "percentage" : false,
                  "dashes" : false,
                  "legend" : {
                     "current" : false,
                     "min" : false,
                     "alignAsTable" : false,
                     "max" : false,
                     "total" : false,
                     "show" : false,
                     "rightSide" : false,
                     "values" : false,
                     "avg" : false,
                     "hideZero" : false
                  },
                  "spaceLength" : 10,
                  "points" : false,
                  "id" : 4,
                  "alert" : {
                     "name" : "OSDs Down",
                     "notifications" : [
                        {
                           "id" : 1
                        }
                     ],
                     "conditions" : [
                        {
                           "evaluator" : {
                              "type" : "gt",
                              "params" : [
                                 0
                              ]
                           },
                           "type" : "query",
                           "query" : {
                              "params" : [
                                 "C",
                                 "30s",
                                 "now"
                              ]
                           },
                           "reducer" : {
                              "params" : [],
                              "type" : "max"
                           },
                           "operator" : {
                              "type" : "and"
                           }
                        }
                     ],
                     "message" : "OSD Down event",
                     "handler" : 1,
                     "executionErrorState" : "alerting",
                     "frequency" : "10s",
                     "noDataState" : "ok"
                  },
                  "pointradius" : 5,
                  "dashLength" : 10,
                  "minSpan" : 2,
                  "renderer" : "flot",
                  "yaxes" : [
                     {
                        "format" : "short",
                        "max" : null,
                        "label" : null,
                        "show" : true,
                        "min" : "0",
                        "logBase" : 1
                     },
                     {
                        "logBase" : 1,
                        "min" : null,
                        "show" : false,
                        "label" : null,
                        "max" : null,
                        "format" : "short"
                     }
                  ],
                  "xaxis" : {
                     "mode" : "time",
                     "show" : true,
                     "buckets" : null,
                     "name" : null,
                     "values" : []
                  },
                  "description" : "Count of OSDs currently in a DOWN state",
                  "bars" : true,
                  "linewidth" : 2,
                  "tooltip" : {
                     "shared" : true,
                     "value_type" : "individual",
                     "sort" : 0
                  },
                  "targets" : [
                     {
                        "target" : "alias(keepLastValue(consolidateBy(maxSeries(collectd.*.$domain.cephmetrics.gauge.*.mon.num_osd), \"max\")),\"total\")",
                        "textEditor" : true,
                        "hide" : true,
                        "refId" : "A"
                     },
                     {
                        "hide" : true,
                        "refId" : "B",
                        "target" : "alias(keepLastValue(consolidateBy(maxSeries(collectd.*.$domain.cephmetrics.gauge.*.mon.num_osd_up), \"max\")),\"up\")",
                        "textEditor" : true
                     },
                     {
                        "targetFull" : "alias(diffSeries(alias(keepLastValue(consolidateBy(maxSeries(collectd.*.$domain.cephmetrics.gauge.*.mon.num_osd), \"max\")),\"total\"),alias(keepLastValue(consolidateBy(maxSeries(collectd.*.$domain.cephmetrics.gauge.*.mon.num_osd_up), \"max\")),\"up\")), \"down\")",
                        "refId" : "C",
                        "hide" : false,
                        "textEditor" : true,
                        "target" : "alias(diffSeries(#A,#B), \"down\")"
                     }
                  ],
                  "thresholds" : [
                     {
                        "op" : "gt",
                        "line" : true,
                        "value" : 0,
                        "fill" : true,
                        "colorMode" : "critical"
                     }
                  ],
                  "datasource" : "Local",
                  "lines" : false,
                  "nullPointMode" : "null",
                  "title" : "OSDs Down",
                  "stack" : false,
                  "span" : 2,
                  "seriesOverrides" : [],
                  "steppedLine" : true,
                  "aliasColors" : {},
                  "timeFrom" : "5m",
                  "type" : "graph",
                  "fill" : 2,
                  "timeShift" : null,
                  "links" : []
               },
               {
                  "bars" : false,
                  "description" : "This trigger raises a notification if the raw used crosses the 85% capacity threshold of the ceph cluster",
                  "thresholds" : [
                     {
                        "op" : "gt",
                        "line" : true,
                        "value" : 85,
                        "fill" : true,
                        "colorMode" : "critical"
                     }
                  ],
                  "linewidth" : 1,
                  "targets" : [
                     {
                        "hide" : true,
                        "refId" : "A",
                        "textEditor" : true,
                        "target" : "alias(maxSeries(groupByNode(collectd.*.$domain.cephmetrics.gauge.*.mon.osd_bytes,1, \"maxSeries\")), \"Raw Capacity\")"
                     },
                     {
                        "refId" : "B",
                        "hide" : true,
                        "textEditor" : true,
                        "target" : "alias(maxSeries(groupByNode(collectd.*.$domain.cephmetrics.gauge.*.mon.osd_bytes_used,1, \"maxSeries\")), \"Used Raw\")"
                     },
                     {
                        "target" : "alias(asPercent(#B, #A), \"Raw Capacity Used %\")",
                        "textEditor" : true,
                        "targetFull" : "alias(asPercent(alias(maxSeries(groupByNode(collectd.*.$domain.cephmetrics.gauge.*.mon.osd_bytes_used,1, \"maxSeries\")), \"Used Raw\"), alias(maxSeries(groupByNode(collectd.*.$domain.cephmetrics.gauge.*.mon.osd_bytes,1, \"maxSeries\")), \"Raw Capacity\")), \"Raw Capacity Used %\")",
                        "refId" : "C"
                     }
                  ],
                  "tooltip" : {
                     "shared" : true,
                     "value_type" : "individual",
                     "sort" : 0
                  },
                  "title" : "Cluster Capacity",
                  "stack" : false,
                  "seriesOverrides" : [],
                  "span" : 2,
                  "nullPointMode" : "null",
                  "lines" : true,
                  "datasource" : "Local",
                  "timeFrom" : null,
                  "type" : "graph",
                  "timeShift" : null,
                  "links" : [],
                  "fill" : 1,
                  "aliasColors" : {},
                  "steppedLine" : false,
                  "legend" : {
                     "max" : false,
                     "avg" : false,
                     "total" : false,
                     "show" : true,
                     "current" : false,
                     "values" : false,
                     "min" : false
                  },
                  "dashes" : false,
                  "percentage" : false,
                  "alert" : {
                     "name" : "Cluster Capacity",
                     "notifications" : [
                        {
                           "id" : 1
                        }
                     ],
                     "message" : "Cluster Capacity Limit Warning",
                     "conditions" : [
                        {
                           "evaluator" : {
                              "params" : [
                                 85
                              ],
                              "type" : "gt"
                           },
                           "type" : "query",
                           "query" : {
                              "params" : [
                                 "C",
                                 "1h",
                                 "now"
                              ]
                           },
                           "reducer" : {
                              "params" : [],
                              "type" : "avg"
                           },
                           "operator" : {
                              "type" : "and"
                           }
                        }
                     ],
                     "executionErrorState" : "alerting",
                     "frequency" : "60s",
                     "handler" : 1,
                     "noDataState" : "keep_state"
                  },
                  "points" : false,
                  "id" : 5,
                  "spaceLength" : 10,
                  "minSpan" : 2,
                  "dashLength" : 10,
                  "renderer" : "flot",
                  "pointradius" : 5,
                  "xaxis" : {
                     "values" : [],
                     "name" : null,
                     "show" : true,
                     "buckets" : null,
                     "mode" : "time"
                  },
                  "yaxes" : [
                     {
                        "label" : "",
                        "show" : true,
                        "min" : "0",
                        "logBase" : 1,
                        "format" : "percent",
                        "max" : "100"
                     },
                     {
                        "logBase" : 1,
                        "min" : null,
                        "show" : false,
                        "label" : null,
                        "max" : null,
                        "format" : "short"
                     }
                  ]
               },
               {
                  "alert" : {
                     "executionErrorState" : "alerting",
                     "frequency" : "60s",
                     "handler" : 1,
                     "noDataState" : "no_data",
                     "notifications" : [
                        {
                           "id" : 1
                        }
                     ],
                     "name" : "PG's Stuck",
                     "message" : "PG's stuck inactive",
                     "conditions" : [
                        {
                           "evaluator" : {
                              "params" : [
                                 0
                              ],
                              "type" : "gt"
                           },
                           "type" : "query",
                           "query" : {
                              "params" : [
                                 "A",
                                 "1m",
                                 "now"
                              ]
                           },
                           "reducer" : {
                              "type" : "last",
                              "params" : []
                           },
                           "operator" : {
                              "type" : "and"
                           }
                        }
                     ]
                  },
                  "points" : false,
                  "id" : 8,
                  "spaceLength" : 10,
                  "legend" : {
                     "max" : false,
                     "avg" : false,
                     "total" : false,
                     "show" : true,
                     "current" : false,
                     "values" : false,
                     "min" : false
                  },
                  "dashes" : false,
                  "percentage" : false,
                  "hideTimeOverride" : true,
                  "xaxis" : {
                     "mode" : "time",
                     "show" : true,
                     "buckets" : null,
                     "name" : null,
                     "values" : [
                        "total"
                     ]
                  },
                  "yaxes" : [
                     {
                        "logBase" : 1,
                        "min" : "0",
                        "show" : true,
                        "label" : null,
                        "max" : null,
                        "format" : "short"
                     },
                     {
                        "show" : false,
                        "label" : null,
                        "logBase" : 1,
                        "min" : null,
                        "max" : null,
                        "format" : "short"
                     }
                  ],
                  "dashLength" : 10,
                  "minSpan" : 2,
                  "renderer" : "flot",
                  "pointradius" : 5,
                  "thresholds" : [
                     {
                        "fill" : true,
                        "colorMode" : "critical",
                        "line" : true,
                        "op" : "gt",
                        "value" : 0
                     }
                  ],
                  "linewidth" : 2,
                  "tooltip" : {
                     "shared" : false,
                     "sort" : 0,
                     "value_type" : "individual"
                  },
                  "targets" : [
                     {
                        "refId" : "A",
                        "target" : "alias(maxSeries(consolidateBy(collectd.*.$domain.cephmetrics.gauge.*.mon.num_pgs_stuck, \"maxSeries\")), \"# pg's stuck inactive\")",
                        "textEditor" : true
                     }
                  ],
                  "bars" : false,
                  "description" : "This chart shows whether there are pg's in a stuck state, that need manual intervention to resolve.",
                  "timeFrom" : "6h",
                  "type" : "graph",
                  "links" : [],
                  "timeShift" : null,
                  "fill" : 2,
                  "aliasColors" : {},
                  "steppedLine" : false,
                  "span" : 2,
                  "title" : "PG's Stuck",
                  "stack" : false,
                  "seriesOverrides" : [],
                  "nullPointMode" : "null",
                  "lines" : true,
                  "datasource" : "Local"
               },
               {
                  "xaxis" : {
                     "values" : [],
                     "name" : null,
                     "show" : true,
                     "buckets" : null,
                     "mode" : "time"
                  },
                  "yaxes" : [
                     {
                        "show" : true,
                        "label" : null,
                        "logBase" : 1,
                        "min" : "0",
                        "max" : null,
                        "format" : "decbytes"
                     },
                     {
                        "show" : true,
                        "label" : null,
                        "logBase" : 1,
                        "min" : null,
                        "max" : null,
                        "format" : "short"
                     }
                  ],
                  "minSpan" : 2,
                  "dashLength" : 10,
                  "renderer" : "flot",
                  "pointradius" : 5,
                  "alert" : {
                     "noDataState" : "ok",
                     "handler" : 1,
                     "executionErrorState" : "alerting",
                     "frequency" : "60s",
                     "conditions" : [
                        {
                           "reducer" : {
                              "type" : "min",
                              "params" : []
                           },
                           "operator" : {
                              "type" : "and"
                           },
                           "query" : {
                              "params" : [
                                 "A",
                                 "5m",
                                 "now"
                              ]
                           },
                           "type" : "query",
                           "evaluator" : {
                              "type" : "lt",
                              "params" : [
                                 0
                              ]
                           }
                        }
                     ],
                     "message" : "OSD Host Loss Free Space Check Failed",
                     "name" : "OSD Host Loss Check",
                     "notifications" : [
                        {
                           "id" : 1
                        }
                     ]
                  },
                  "spaceLength" : 10,
                  "points" : false,
                  "id" : 9,
                  "dashes" : false,
                  "legend" : {
                     "current" : false,
                     "show" : false,
                     "min" : false,
                     "values" : false,
                     "max" : false,
                     "total" : false,
                     "avg" : false
                  },
                  "percentage" : false,
                  "aliasColors" : {
                     "Largest OSD Host" : "#890F02"
                  },
                  "steppedLine" : false,
                  "timeFrom" : null,
                  "type" : "graph",
                  "timeShift" : null,
                  "links" : [],
                  "fill" : 1,
                  "lines" : true,
                  "seriesOverrides" : [],
                  "title" : "OSD Host Loss Check",
                  "stack" : false,
                  "span" : 2,
                  "nullPointMode" : "null",
                  "datasource" : "Local",
                  "thresholds" : [
                     {
                        "line" : true,
                        "op" : "lt",
                        "value" : 0,
                        "fill" : true,
                        "colorMode" : "critical"
                     }
                  ],
                  "linewidth" : 1,
                  "tooltip" : {
                     "shared" : true,
                     "sort" : 0,
                     "value_type" : "individual"
                  },
                  "targets" : [
                     {
                        "refId" : "A",
                        "hide" : true,
                        "textEditor" : true,
                        "target" : "alias(scale(maxSeries(groupByNode(collectd.*.$domain.cephmetrics.gauge.*.mon.osd_bytes_avail,1, \"maxSeries\")),0.9), \"Raw Freespace\")"
                     },
                     {
                        "target" : "alias(maxSeries(groupByNode(keepLastValue(collectd.*.$domain.cephmetrics.gauge.*.osd.*.stat_bytes),1,\"sumSeries\")), \"Largest OSD Host\")",
                        "textEditor" : true,
                        "refId" : "B",
                        "hide" : true
                     },
                     {
                        "targetFull" : "alias(diffSeries(alias(scale(maxSeries(groupByNode(collectd.*.$domain.cephmetrics.gauge.*.mon.osd_bytes_avail,1, \"maxSeries\")),0.9), \"Raw Freespace\"),alias(maxSeries(groupByNode(keepLastValue(collectd.*.$domain.cephmetrics.gauge.*.osd.*.stat_bytes),1,\"sumSeries\")), \"Largest OSD Host\")),\"freespace after Node loss\")",
                        "refId" : "C",
                        "target" : "alias(diffSeries(#A,#B),\"freespace after Node loss\")",
                        "textEditor" : true
                     }
                  ],
                  "bars" : false,
                  "description" : "This graph checks the cluster @ 90% full is enough to support the loss of the largest OSD host"
               },
               {
                  "renderer" : "flot",
                  "minSpan" : 2,
                  "dashLength" : 10,
                  "pointradius" : 5,
                  "xaxis" : {
                     "mode" : "time",
                     "show" : true,
                     "buckets" : null,
                     "values" : [],
                     "name" : null
                  },
                  "yaxes" : [
                     {
                        "min" : "0",
                        "logBase" : 1,
                        "label" : "ms",
                        "show" : true,
                        "format" : "none",
                        "max" : null
                     },
                     {
                        "format" : "short",
                        "max" : null,
                        "min" : null,
                        "logBase" : 1,
                        "label" : null,
                        "show" : false
                     }
                  ],
                  "legend" : {
                     "max" : false,
                     "total" : false,
                     "avg" : false,
                     "current" : false,
                     "show" : true,
                     "min" : false,
                     "values" : false
                  },
                  "dashes" : false,
                  "hideTimeOverride" : true,
                  "percentage" : false,
                  "maxDataPoints" : "",
                  "alert" : {
                     "executionErrorState" : "alerting",
                     "frequency" : "30s",
                     "handler" : 1,
                     "noDataState" : "ok",
                     "name" : "Slow OSD responses alert",
                     "notifications" : [
                        {
                           "id" : 1
                        }
                     ],
                     "message" : "OSD Response time is > 1s",
                     "conditions" : [
                        {
                           "evaluator" : {
                              "type" : "gt",
                              "params" : [
                                 1000
                              ]
                           },
                           "type" : "query",
                           "query" : {
                              "params" : [
                                 "A",
                                 "1m",
                                 "now"
                              ]
                           },
                           "operator" : {
                              "type" : "and"
                           },
                           "reducer" : {
                              "type" : "max",
                              "params" : []
                           }
                        }
                     ]
                  },
                  "id" : 10,
                  "points" : false,
                  "spaceLength" : 10,
                  "title" : "Slow OSD responses",
                  "stack" : false,
                  "nullPointMode" : "null",
                  "span" : 2,
                  "seriesOverrides" : [],
                  "lines" : true,
                  "datasource" : "Local",
                  "timeShift" : null,
                  "fill" : 1,
                  "links" : [],
                  "timeFrom" : "1h",
                  "type" : "graph",
                  "aliasColors" : {
                     "Largest OSD Host" : "#890F02"
                  },
                  "steppedLine" : false,
                  "bars" : false,
                  "description" : "Graph checking for OSD Latencies that are above 1s.",
                  "thresholds" : [
                     {
                        "fill" : true,
                        "colorMode" : "critical",
                        "line" : true,
                        "op" : "gt",
                        "value" : 1000
                     }
                  ],
                  "targets" : [
                     {
                        "refId" : "A",
                        "textEditor" : true,
                        "target" : "aliasByNode(currentAbove(keepLastValue(transformNull(collectd.*.$domain.cephmetrics.gauge.*.osd.*.perf.await,-1)),1000),1,-3)"
                     }
                  ],
                  "tooltip" : {
                     "sort" : 0,
                     "value_type" : "individual",
                     "shared" : true
                  },
                  "linewidth" : 1
               },
               {
                  "thresholds" : [
                     {
                        "value" : 10,
                        "op" : "gt",
                        "line" : true,
                        "colorMode" : "critical",
                        "fill" : true
                     }
                  ],
                  "linewidth" : 1,
                  "tooltip" : {
                     "shared" : true,
                     "sort" : 0,
                     "value_type" : "individual"
                  },
                  "targets" : [
                     {
                        "target" : "groupByNode(collectd.*.$domain.interface.*.if_{dropped,errors}.*,1,\"sumSeries\")",
                        "textEditor" : true,
                        "refId" : "A"
                     }
                  ],
                  "bars" : false,
                  "description" : "Checks all interfaces for dropped/error packets, and alerts if more than 10 are seen in a 5m interval",
                  "aliasColors" : {},
                  "steppedLine" : false,
                  "type" : "graph",
                  "timeFrom" : null,
                  "fill" : 1,
                  "timeShift" : null,
                  "links" : [],
                  "lines" : true,
                  "span" : 2,
                  "title" : "Network Errors",
                  "stack" : false,
                  "seriesOverrides" : [],
                  "nullPointMode" : "null",
                  "datasource" : null,
                  "alert" : {
                     "handler" : 1,
                     "frequency" : "30s",
                     "executionErrorState" : "keep_state",
                     "noDataState" : "no_data",
                     "notifications" : [
                        {
                           "id" : 1
                        }
                     ],
                     "name" : "Network Errors alert",
                     "conditions" : [
                        {
                           "query" : {
                              "params" : [
                                 "A",
                                 "5m",
                                 "now"
                              ]
                           },
                           "reducer" : {
                              "type" : "max",
                              "params" : []
                           },
                           "operator" : {
                              "type" : "and"
                           },
                           "evaluator" : {
                              "type" : "gt",
                              "params" : [
                                 10
                              ]
                           },
                           "type" : "query"
                        }
                     ],
                     "message" : "Network rx/tx issues detected"
                  },
                  "spaceLength" : 10,
                  "points" : false,
                  "id" : 11,
                  "dashes" : false,
                  "legend" : {
                     "min" : false,
                     "values" : false,
                     "current" : false,
                     "show" : false,
                     "total" : false,
                     "avg" : false,
                     "max" : false
                  },
                  "percentage" : false,
                  "xaxis" : {
                     "show" : true,
                     "buckets" : null,
                     "name" : null,
                     "values" : [],
                     "mode" : "time"
                  },
                  "yaxes" : [
                     {
                        "format" : "none",
                        "max" : null,
                        "label" : null,
                        "show" : true,
                        "min" : "0",
                        "logBase" : 1
                     },
                     {
                        "logBase" : 1,
                        "min" : null,
                        "show" : false,
                        "label" : null,
                        "max" : null,
                        "format" : "short"
                     }
                  ],
                  "minSpan" : 2,
                  "dashLength" : 10,
                  "renderer" : "flot",
                  "pointradius" : 5
               }
            ],
            "repeatIteration" : null,
            "repeat" : null
         }
      ],
      "graphTooltip" : 0,
      "links" : [],
      "templating" : {
         "list" : []
      },
      "tags" : [],
      "editable" : false,
      "title" : "Alert Status"
   }
}
